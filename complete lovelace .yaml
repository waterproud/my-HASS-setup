title: Home
views:
  - theme: Mushroom
    icon: mdi:star-outline
    layout:
      width: 300
      max_cols: 2
    type: sidebar
    badges: []
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            double_tap_action:
              action: toggle
            entity: input_boolean.francesco_present
            icon: mdi:face-man
            icon_color: |-
              {% if is_state('input_boolean.francesco_present', 'on') %}
              green
              {% else %}
              red
              {% endif %}
            tap_action:
              action: more-info
            hold_action:
              action: toggle
            content: ''
          - type: template
            double_tap_action:
              action: toggle
            entity: input_boolean.giovanna_present
            icon: mdi:face-woman
            icon_color: |-
              {% if is_state('input_boolean.giovanna_present', 'on') %}
              green
              {% else %}
              red
              {% endif %}
            tap_action:
              action: more-info
            hold_action:
              action: toggle
            content: ''
          - type: conditional
            conditions:
              - entity: light.tutte_le_luci
                state: 'on'
            chip:
              type: light
              entity: light.tutte_le_luci
              name: Luci accese in casa
              tap_action:
                action: toggle
              content_info: none
          - type: conditional
            conditions:
              - entity: binary_sensor.porte
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.porte
              name: Porte aperte
              icon_color: red
              content_info: none
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              icon: hue:room-other
          - type: conditional
            conditions:
              - entity: binary_sensor.finestre
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.finestre
              name: Porte aperte
              icon_color: red
              content_info: none
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              icon: mdi:window-open-variant
          - type: conditional
            conditions:
              - entity: media_player.lg_webos_smart_tv
                state: 'on'
            chip:
              type: entity
              entity: media_player.lg_webos_smart_tv
              icon: mdi:television-classic
              icon_color: purple
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              content_info: none
          - type: conditional
            conditions:
              - entity: vacuum.roomba966
                state: cleaning
            chip:
              type: entity
              entity: vacuum.roomba966
              icon_color: green
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              content_info: none
          - type: conditional
            conditions:
              - entity: vacuum.roomba966
                state: returning
            chip:
              type: entity
              entity: vacuum.roomba966
              content_info: none
              icon_color: amber
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: vacuum.roomba966
                state: error
            chip:
              type: entity
              entity: vacuum.roomba966
              icon_color: red
              content_info: none
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: vacuum.roomba966
                state: paused
            chip:
              type: entity
              entity: vacuum.roomba966
              content_info: none
              icon_color: blue
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: binary_sensor.roomba966_bin_full
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.roomba966_bin_full
              icon_color: red
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              content_info: none
          - type: conditional
            conditions:
              - entity: light.sonoff_a480025e30
                state: 'on'
            chip:
              type: entity
              entity: light.sonoff_a480025e30
              icon: hue:room-carport
              icon_color: orange
              tap_action:
                action: toggle
              hold_action:
                action: none
              double_tap_action:
                action: none
              content_info: none
          - type: conditional
            conditions:
              - entity: input_boolean.frigo_allarme
                state: 'on'
            chip:
              type: entity
              entity: input_boolean.frigo_allarme
              content_info: none
              icon_color: blue
              hold_action:
                action: none
              tap_action:
                action: more-info
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: input_boolean.freezer_allarme
                state: 'on'
            chip:
              type: entity
              entity: input_boolean.freezer_allarme
              icon_color: blue
              tap_action:
                action: more-info
              content_info: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: input_boolean.battery_allarme
                state: 'on'
            chip:
              type: entity
              entity: input_boolean.battery_allarme
              content_info: none
              icon_color: red
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: call-service
                service: input_boolean.turn_off
                service_data: {}
                target:
                  entity_id: input_boolean.battery_allarme
          - type: conditional
            conditions:
              - entity: binary_sensor.0x0015bc003100c2bf_smoke
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.0x0015bc003100c2bf_smoke
              icon: mdi:fire
              icon_color: red
              name: Sotto
              content_info: name
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: binary_sensor.0x0015bc003100c3e1_smoke
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.0x0015bc003100c3e1_smoke
              icon: mdi:fire
              icon_color: red
              name: Sopra
              content_info: name
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: switch.schedule_hvac_notte
                state: 'on'
            chip:
              type: entity
              entity: switch.schedule_hvac_notte
              icon_color: purple
              name: Timer
              content_info: none
              icon: mdi:fan-clock
              tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  title: Opzioni Timer
                  card:
                    type: custom:mod-card
                    style: |
                      ha-card {
                         padding-top: 20px;
                         padding-right: 20px;
                         padding-left: 20px;
                         padding-bottom: 20px;     
                      }
                    card:
                      type: custom:scheduler-card
                      standard_configuration: true
                      discover_existing: true
                      include:
                        - climate
                      exclude: []
                      title: true
                      sort_by:
                        - state
                        - relative-time
                      display_options:
                        primary_info: '{entity}: {action}'
                        secondary_info:
                          - relative-time
                          - days
                          - time
                          - additional-tasks
                        icon: action
                      show_header_toggle: false
          - type: conditional
            conditions:
              - entity: input_boolean.philipscamera_fan_on_off
                state: 'on'
            chip:
              type: entity
              entity: input_boolean.philipscamera_fan_on_off
              icon_color: orange
              icon: mdi:ceiling-fan
              tap_action:
                action: call-service
                service: remote.send_command
                data:
                  device: philipscamera
                  command: fan 0
                target:
                  entity_id: remote.broadlink_remote
              content_info: none
          - type: conditional
            conditions:
              - entity: climate.daikin_sala
                state: cool
            chip:
              type: entity
              entity: climate.daikin_sala
              icon: mdi:air-conditioner
              name: Sala
              content_info: name
              icon_color: blue
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_sala
                state: dry
            chip:
              type: entity
              entity: climate.daikin_sala
              icon: mdi:air-conditioner
              name: Sala
              content_info: name
              icon_color: amber
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_sala
                state: heat
            chip:
              type: entity
              entity: climate.daikin_sala
              icon: mdi:air-conditioner
              name: Sala
              content_info: name
              icon_color: red
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_sala
                state: fan_only
            chip:
              type: entity
              entity: climate.daikin_sala
              icon: mdi:air-conditioner
              name: Sala
              content_info: name
              icon_color: grey
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_salotto
                state: cool
            chip:
              type: entity
              entity: climate.daikin_salotto
              icon: mdi:air-conditioner
              name: Salotto
              content_info: name
              icon_color: blue
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_salotto
                state: dry
            chip:
              type: entity
              entity: climate.daikin_salotto
              icon: mdi:air-conditioner
              name: Salotto
              content_info: name
              icon_color: amber
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_salotto
                state: heat
            chip:
              type: entity
              entity: climate.daikin_salotto
              icon: mdi:air-conditioner
              name: Salotto
              content_info: name
              icon_color: red
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: climate.daikin_salotto
                state: fan_only
            chip:
              type: entity
              entity: climate.daikin_salotto
              icon: mdi:air-conditioner
              name: Salotto
              content_info: name
              icon_color: grey
              tap_action:
                action: more-info
              double_tap_action:
                action: none
              hold_action:
                action: none
        alignment: center
      - square: false
        columns: 2
        type: grid
        cards:
          - square: false
            columns: 3
            type: grid
            cards:
              - type: custom:mushroom-entity-card
                entity: input_boolean.clima_automatico_nodered
                icon_color: green
                secondary_info: none
                icon: mdi:sun-thermometer-outline
                layout: vertical
                primary_info: none
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 50px !important;
                      border-radius: 100px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: input_boolean.clima_automatico_notte_nodered
                icon_color: green
                secondary_info: none
                icon: mdi:weather-night
                name: ' '
                primary_info: none
                layout: vertical
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 50px !important;
                      border-radius: 100px !important; 
                      }
              - type: custom:mushroom-entity-card
                icon: mdi:timer-cog-outline
                icon_color: purple
                layout: vertical
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Timer
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 20px;
                           padding-right: 20px;
                           padding-left: 20px;
                           padding-bottom: 20px;     
                        }
                      card:
                        type: grid
                        square: false
                        columns: 1
                        cards:
                          - type: custom:scheduler-card
                            standard_configuration: true
                            discover_existing: true
                            include:
                              - climate
                            exclude: []
                            title: true
                            sort_by:
                              - state
                              - relative-time
                            display_options:
                              primary_info: '{entity}: {action}'
                              secondary_info:
                                - relative-time
                                - days
                                - time
                                - additional-tasks
                              icon: action
                              show_header_toggle: false
                          - square: false
                            columns: 1
                            type: grid
                            cards:
                              - type: custom:mushroom-title-card
                                title: >-
                                  {% if is_state('timer.timer_30min_hvac_sala',
                                  'active') %}

                                  Timer Daikin Sala: 

                                  {% elif is_state('timer.timer_1hr_hvac_sala',
                                  'active') %}

                                  Timer Daikin Sala: 

                                  {% elif is_state('timer.timer_2hr_hvac_sala',
                                  'active') %}

                                  Timer Daikin Sala: 

                                  {% else %}

                                  Opzioni Timer Daikin Sala:

                                  {% endif %}
                                subtitle: >-
                                  {% if is_state('timer.timer_30min_hvac_sala',
                                  'active') %}

                                  attivo 30 minuti

                                  {% elif is_state('timer.timer_1hr_hvac_sala',
                                  'active') %}

                                  attivo 1 ora

                                  {% elif is_state('timer.timer_2hr_hvac_sala',
                                  'active') %}

                                  attivo 2 ore

                                  {% else %}

                                  Nessun Timer Attivo

                                  {% endif %}
                              - type: custom:timer-bar-card
                                entities:
                                  - timer.timer_30min_hvac_sala
                                  - timer.timer_1hr_hvac_sala
                                  - timer.timer_2hr_hvac_sala
                                bar_direction: rtl
                                invert: true
                                compressed: true
                                bar_foreground: linear-gradient(to right, green, yellow,red)
                                layout: full_row
                                filter: true
                                bar_radius: 10px
                                bar_height: 10px
                                text_width: 6em
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 20px !important; 
                                      }
                              - square: false
                                columns: 4
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_sala',
                                      'active') %}

                                      30 min

                                      {% else %}

                                      30 min

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_2hr_hvac_sala
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_sala',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_30min_hvac_sala
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_1hr_hvac_sala',
                                      'active') %}

                                      1 ora

                                      {% else %}

                                      1 ora

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_1hr_hvac_sala
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_1hr_hvac_sala',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_1hr_hvac_sala
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_2hr_hvac_sala',
                                      'active') %}

                                      2 ore

                                      {% else %}

                                      2 ore

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_2hr_hvac_sala
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_2hr_hvac_sala',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_2hr_hvac_sala
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: Stop
                                    icon: mdi:stop
                                    entity: timer.timer_1hr_hvac_salotto
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_sala',
                                      'active') or
                                      is_state('timer.timer_1hr_hvac_sala',
                                      'active') or
                                      is_state('timer.timer_2hr_hvac_sala',
                                      'active') %}

                                      red

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.cancel
                                      data: {}
                                      target:
                                        entity_id:
                                          - timer.timer_2hr_hvac_sala
                                          - timer.timer_1hr_hvac_sala
                                          - timer.timer_30min_hvac_sala
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                          - square: false
                            columns: 1
                            type: grid
                            cards:
                              - type: custom:mushroom-title-card
                                title: >-
                                  {% if
                                  is_state('timer.timer_30min_hvac_salotto',
                                  'active') %}

                                  Timer Daikin Salotto:

                                  {% elif
                                  is_state('timer.timer_1hr_hvac_salotto',
                                  'active') %}

                                  Timer Daikin Salotto:

                                  {% elif
                                  is_state('timer.timer_2hr_hvac_salotto',
                                  'active') %}

                                  Timer Daikin Salotto:

                                  {% else %}

                                  Opzioni Timer Daikin Salotto:

                                  {% endif %}
                                subtitle: >-
                                  {% if
                                  is_state('timer.timer_30min_hvac_salotto',
                                  'active') %}

                                  attivo 30 minuti

                                  {% elif
                                  is_state('timer.timer_1hr_hvac_salotto',
                                  'active') %}

                                  attivo 1 ora

                                  {% elif
                                  is_state('timer.timer_2hr_hvac_salotto',
                                  'active') %}

                                  attivo 2 ore

                                  {% else %}

                                  Nessun Timer Attivo

                                  {% endif %}
                              - type: custom:timer-bar-card
                                entities:
                                  - timer.timer_30min_hvac_salotto
                                  - timer.timer_1hr_hvac_salotto
                                  - timer.timer_2hr_hvac_salotto
                                bar_direction: rtl
                                invert: true
                                compressed: true
                                bar_foreground: linear-gradient(to right, green, yellow,red)
                                layout: full_row
                                filter: true
                                bar_radius: 10px
                                bar_height: 10px
                                text_width: 6em
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 20px !important; 
                                      }
                              - square: false
                                columns: 4
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_salotto',
                                      'active') %}

                                      30 min

                                      {% else %}

                                      30 min

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_2hr_hvac_salotto
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_salotto',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_30min_hvac_salotto
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_1hr_hvac_salotto',
                                      'active') %}

                                      1 ora

                                      {% else %}

                                      1 ora

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_1hr_hvac_salotto
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_1hr_hvac_salotto',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_1hr_hvac_salotto
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: >-
                                      {% if
                                      is_state('timer.timer_2hr_hvac_salotto',
                                      'active') %}

                                      2 ore

                                      {% else %}

                                      2 ore

                                      {% endif %}
                                    icon: mdi:timer
                                    entity: timer.timer_2hr_hvac_salotto
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_2hr_hvac_salotto',
                                      'active') %}

                                      green

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.start
                                      data: {}
                                      target:
                                        entity_id: timer.timer_2hr_hvac_salotto
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: Stop
                                    icon: mdi:stop
                                    entity: timer.timer_1hr_hvac_salotto
                                    icon_color: >-
                                      {% if
                                      is_state('timer.timer_30min_hvac_salotto',
                                      'active') or
                                      is_state('timer.timer_1hr_hvac_salotto',
                                      'active') or
                                      is_state('timer.timer_2hr_hvac_salotto',
                                      'active') %}

                                      red

                                      {% else %}

                                      grey

                                      {% endif %}
                                    tap_action:
                                      action: call-service
                                      service: timer.cancel
                                      data: {}
                                      target:
                                        entity_id:
                                          - timer.timer_2hr_hvac_salotto
                                          - timer.timer_1hr_hvac_salotto
                                          - timer.timer_30min_hvac_salotto
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    layout: vertical
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                          border-radius: 25px !important;
                                          height: 85px !important;
                                          }
                primary_info: none
                secondary_info: none
                entity: sensor.shellyem_98cdac1f3a41_channel_1_power
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 50px !important;
                      border-radius: 100px !important; 
                      }
          - type: custom:mushroom-alarm-control-panel-card
            entity: alarm_control_panel.alarmo
            states: []
            name: Allarme
            double_tap_action:
              action: call-service
              service: alarmo.disarm
              service_data:
                entity_id: alarm_control_panel.alarmo
              target: {}
            hold_action:
              action: call-service
              service: alarmo.disarm
              service_data:
                entity_id: alarm_control_panel.alarmo
              target: {}
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni Allarme
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;     
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-title-card
                        title: >-
                          {% if is_state('alarm_control_panel.alarmo',
                          'disarmed') %}

                          Stato allarme: DISATTIVATO

                          {% elif is_state('alarm_control_panel.alarmo',
                          'armed_away') %}

                          Stato allarme: ATTIVO, FUORI CASA

                          {% elif is_state('alarm_control_panel.alarmo',
                          'armed_night') %}

                          Stato allarme: ATTIVO, NOTTE

                          {% elif is_state('alarm_control_panel.alarmo',
                          'armed_home') %}

                          Stato allarme: GUEST MODE

                          {% else %}

                          Stato allarme: !!ERROR!!

                          {% endif %}
                        subtitle: ''
                        alignment: center
                      - type: custom:mushroom-alarm-control-panel-card
                        entity: alarm_control_panel.alarmo
                        states: []
                        show_keypad: false
                        secondary_info: none
                        fill_container: true
                        layout: vertical
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: more-info
                        tap_action:
                          action: call-service
                          service: alarmo.disarm
                          data:
                            entity_id: alarm_control_panel.alarmo
                          target: {}
                        primary_info: state
                        card_mod:
                          style:
                            .: |
                              ha-card {
                              height: 100px !important;
                              border-radius: 25px !important; 
                              }
                      - square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-alarm-control-panel-card
                            entity: alarm_control_panel.alarmo
                            states:
                              - armed_away
                            icon_type: none
                            primary_info: name
                            secondary_info: none
                            name: Modalità fuori casa
                            show_keypad: false
                            icon: ''
                            layout: vertical
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 100px !important;
                                  border-radius: 25px !important; 
                                  }
                          - type: custom:mushroom-alarm-control-panel-card
                            entity: alarm_control_panel.alarmo
                            states:
                              - armed_night
                            icon_type: none
                            primary_info: name
                            secondary_info: none
                            name: Modalità notte
                            layout: vertical
                            show_keypad: false
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 100px !important;
                                  border-radius: 25px !important; 
                                  }
                          - type: custom:mushroom-alarm-control-panel-card
                            entity: alarm_control_panel.alarmo
                            states:
                              - armed_home
                            icon_type: none
                            primary_info: name
                            secondary_info: none
                            name: Modalità Ospiti
                            show_keypad: false
                            icon: ''
                            layout: vertical
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 100px !important;
                                  border-radius: 25px !important; 
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: '----- Attivazione sirena manuale -----'
                        alignment: center
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-entity-card
                            entity: sensor.0x0015bc003100c2bf_battery
                            icon_color: amber
                            tap_action:
                              action: call-service
                              service: input_boolean.turn_off
                              service_data: {}
                              target:
                                entity_id: input_boolean.alarm_triggered
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            secondary_info: none
                            name: Disattivazione Sirena
                            icon: mdi:alarm-light-off-outline
                            layout: vertical
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 100px !important;
                                  border-radius: 25px !important; 
                                  }
                          - type: custom:mushroom-entity-card
                            entity: input_boolean.alarm_triggered
                            icon_color: red
                            icon: mdi:alarm-light-outline
                            tap_action:
                              action: call-service
                              service: input_boolean.turn_on
                              service_data: {}
                              target:
                                entity_id: input_boolean.alarm_triggered
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            secondary_info: none
                            name: Attivazione Sirena
                            layout: vertical
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 100px !important;
                                  border-radius: 25px !important; 
                                  }
            card_mod:
              style:
                .: |
                  ha-card {
                  height: 50px !important;
                  border-radius: 100px !important; 
                  }
      - type: custom:mushroom-title-card
        title: '------ Luci ------'
        alignment: center
        subtitle: ''
      - square: false
        columns: 1
        type: grid
        cards:
          - square: false
            columns: 6
            type: grid
            cards:
              - type: custom:mushroom-entity-card
                entity: light.cucina
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id: light.cucina
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Cucina
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.cucina
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:room-kitchen
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_5
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce1
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                            hide_state: false
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_6
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 2
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_7
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 3
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_8
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 4
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                double_tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Cucina
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.cucina
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:room-kitchen
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_5
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce1
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                            hide_state: false
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_6
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 2
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_7
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 3
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                          - type: custom:mushroom-light-card
                            entity: light.color_temperature_light_8
                            show_color_temp_control: true
                            show_brightness_control: true
                            name: Luce 4
                            hide_state: false
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon: hue:bulb-candle
                icon: hue:room-kitchen
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: light.sala
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id:
                      - light.sala
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Sala
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.sala
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.sala
                            name: Tutte le luci sala
                            icon: hue:room-dining
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_2
                            name: Lightstrip libreria
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_1
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_1
                            name: Lightstrip credenza 1
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_4
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_4
                            name: Lightstrip credenza 2
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.luce_ingresso
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.extended_color_light_1
                                  - light.extended_color_light_2
                            icon: hue:ceiling-being
                            name: Luce ingresso
                double_tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Sala
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.sala
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.sala
                            name: Tutte le luci sala
                            icon: hue:room-dining
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_2
                            name: Lightstrip libreria
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_1
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_1
                            name: Lightstrip credenza 1
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_4
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_4
                            name: Lightstrip credenza 2
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.luce_ingresso
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.extended_color_light_1
                                  - light.extended_color_light_2
                            icon: hue:ceiling-being
                            name: Luce ingresso
                icon: hue:room-dining
                name: ' '
                primary_info: none
                secondary_info: none
                layout: vertical
                icon_color: amber
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: hue:room-bedroom
                entity: light.camera
                icon_color: >-
                  {% if is_state('input_boolean.philipscamera_on_off', 'on') and

                  is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                  amber

                  {% elif is_state('input_boolean.philipscamera_on_off', 'off')
                  and

                  is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                  amber

                  {% elif is_state('input_boolean.philipscamera_on_off', 'on')
                  and

                  is_state('light.hue_lightstrip_plus_5_2', 'off') %}

                  amber

                  {% else %}

                  grey

                  {% endif %}
                layout: vertical
                badge_icon: >-
                  {% if is_state('input_boolean.philipscamera_fan_on_off', 'on')
                  %}

                  mdi:fan

                  {% else %}

                  mdi:fan-off

                  {% endif %}
                badge_color: >-
                  {% if is_state('input_boolean.philipscamera_fan_on_off', 'on')
                  %}

                  green

                  {% else %}

                  grey

                  {% endif %}
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  data: {}
                  target:
                    entity_id: input_boolean.tasto_boolean_camera
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Camera
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Tutte le luci camera
                            secondary: >-
                              {% if
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              Tutte accese

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'off') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              Solo lightstrip

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'off')
                              %}

                              Solo plafoniera

                              {% else %}

                              Spenta

                              {% endif %}
                            icon: hue:room-bedroom
                            layout: vertical
                            icon_color: >-
                              {% if
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              orange

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'off') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              orange

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'off')
                              %}

                              orange

                              {% else %}

                              grey

                              {% endif %}
                            tap_action:
                              action: call-service
                              service: input_boolean.toggle
                              data: {}
                              target:
                                entity_id: input_boolean.tasto_boolean_camera
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_5_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.hue_lightstrip_plus_5_2
                            name: Lightstrip camera
                            icon: hue:lightstrip
                            fill_container: false
                            hide_state: false
                            collapsible_controls: false
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: Philips led
                                secondary: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  Accesa

                                  {% else %}

                                  Spenta

                                  {% endif %}
                                icon: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  hue:amaze-alt

                                  {% else %}

                                  hue:amaze-alt-off

                                  {% endif %}
                                icon_color: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  amber

                                  {% else %}

                                  grey

                                  {% endif %}
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                        height: 85px !important;
                                      }
                              - square: false
                                columns: 2
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:lightning-bolt-circle
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: turn on
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: green
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                            height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:close-circle-outline
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: turn off
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: red
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                            height: 85px !important;
                                          }
                          - type: custom:mushroom-title-card
                            subtitle: 'Ventilatore:'
                          - square: false
                            columns: 1
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: Philips fan
                                secondary: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  Accesa

                                  {% else %}

                                  Spenta

                                  {% endif %}
                                icon: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  mdi:fan

                                  {% else %}

                                  mdi:fan-off

                                  {% endif %}
                                icon_color: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                              - square: false
                                columns: 4
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-1
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 1
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: lime
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-2
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 2
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: light-green
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-3
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 3
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: green
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-off
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 0
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: red
                double_tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Camera
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Tutte le luci camera
                            secondary: >-
                              {% if
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              Tutte accese

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'off') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              Solo lightstrip

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'off')
                              %}

                              Solo plafoniera

                              {% else %}

                              Spenta

                              {% endif %}
                            icon: hue:room-bedroom
                            layout: vertical
                            icon_color: >-
                              {% if
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              orange

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'off') and
                              is_state('light.hue_lightstrip_plus_5_2', 'on') %}

                              orange

                              {% elif
                              is_state('input_boolean.philipscamera_on_off',
                              'on') and
                              is_state('light.hue_lightstrip_plus_5_2', 'off')
                              %}

                              orange

                              {% else %}

                              grey

                              {% endif %}
                            tap_action:
                              action: call-service
                              service: input_boolean.toggle
                              data: {}
                              target:
                                entity_id: input_boolean.tasto_boolean_camera
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_5_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.hue_lightstrip_plus_5_2
                            name: Lightstrip camera
                            icon: hue:lightstrip
                            fill_container: false
                            hide_state: false
                            collapsible_controls: false
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: Philips led
                                secondary: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  Accesa

                                  {% else %}

                                  Spenta

                                  {% endif %}
                                icon: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  hue:amaze-alt

                                  {% else %}

                                  hue:amaze-alt-off

                                  {% endif %}
                                icon_color: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_on_off',
                                  'on') %}

                                  amber

                                  {% else %}

                                  grey

                                  {% endif %}
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                        height: 85px !important;
                                      }
                              - square: false
                                columns: 2
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:lightning-bolt-circle
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: turn on
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: green
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                            height: 85px !important;
                                          }
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:close-circle-outline
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: turn off
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: red
                                    card_mod:
                                      style:
                                        .: |
                                          ha-card {
                                            height: 85px !important;
                                          }
                          - type: custom:mushroom-title-card
                            subtitle: 'Ventilatore:'
                          - square: false
                            columns: 1
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: Philips fan
                                secondary: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  Accesa

                                  {% else %}

                                  Spenta

                                  {% endif %}
                                icon: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  mdi:fan

                                  {% else %}

                                  mdi:fan-off

                                  {% endif %}
                                icon_color: >-
                                  {% if
                                  is_state('input_boolean.philipscamera_fan_on_off',
                                  'on') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                              - square: false
                                columns: 4
                                type: grid
                                cards:
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-1
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 1
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: lime
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-2
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 2
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: light-green
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-speed-3
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 3
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: green
                                  - type: custom:mushroom-template-card
                                    primary: ''
                                    secondary: ''
                                    icon: mdi:fan-off
                                    entity: remote.broadlink_remote
                                    tap_action:
                                      action: call-service
                                      service: remote.send_command
                                      data:
                                        device: philipscamera
                                        command: fan 0
                                      target:
                                        entity_id: remote.broadlink_remote
                                    layout: vertical
                                    icon_color: red
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: light.bagno
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id:
                      - light.bagno
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:bathtub
                name: ' '
                icon_color: amber
                layout: vertical
                primary_info: none
                secondary_info: none
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: light.salotto
                tap_action:
                  action: call-service
                  service: light.toggle
                  target:
                    entity_id:
                      - light.salotto
                  data:
                    transition: 2
                    kelvin: 3700
                    brightness: 255
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Salotto
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.salotto
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3700
                                brightness: 255
                              target:
                                entity_id:
                                  - light.salotto
                            name: Tutte le luci salotto
                            icon: hue:room-living
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_3
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_3
                            name: Lightstrip TV
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_filament_bulb_1
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3700
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_filament_bulb_1
                            icon: hue:bulb-filament
                            name: Luce divano
                          - type: custom:mushroom-light-card
                            entity: light.hue_color_spot_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_color_spot_2
                            name: Faretto salotto
                            icon: hue:single-spot
                double_tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Salotto
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.salotto
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3700
                                brightness: 255
                              target:
                                entity_id:
                                  - light.salotto
                            name: Tutte le luci salotto
                            icon: hue:room-living
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_3
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_lightstrip_plus_3
                            name: Lightstrip TV
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.hue_filament_bulb_1
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3700
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_filament_bulb_1
                            icon: hue:bulb-filament
                            name: Luce divano
                          - type: custom:mushroom-light-card
                            entity: light.hue_color_spot_2
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_color_spot_2
                            name: Faretto salotto
                            icon: hue:single-spot
                icon: hue:room-living
                name: ' '
                primary_info: none
                secondary_info: none
                layout: vertical
                icon_color: amber
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: light.ufficio
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id:
                      - light.ufficio
                hold_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Ufficio
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.ufficio
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.ufficio
                            name: Tutte le luci ufficio
                            icon: hue:room-office
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_5
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.hue_lightstrip_plus_5
                            name: Lightstrip ufficio
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.faretti_ufficio
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_color_spot_1
                                  - light.hue_color_spot_3
                                  - light.hue_color_spot_4
                            name: Faretti ufficio
                            icon: hue:double-spot
                        square: false
                        columns: 1
                double_tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Opzioni Ufficio
                    card:
                      type: custom:mod-card
                      style: |
                        ha-card {
                           padding-top: 10px;
                           padding-right: 10px;
                           padding-left: 10px;
                           padding-bottom: 10px;     
                        }
                      card:
                        type: grid
                        cards:
                          - type: custom:mushroom-light-card
                            entity: light.ufficio
                            show_color_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.ufficio
                            name: Tutte le luci ufficio
                            icon: hue:room-office
                            layout: vertical
                            show_brightness_control: true
                            show_color_temp_control: true
                          - type: custom:mushroom-title-card
                            subtitle: 'Luci singole:'
                          - type: custom:mushroom-light-card
                            entity: light.hue_lightstrip_plus_5
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id: light.hue_lightstrip_plus_5
                            name: Lightstrip ufficio
                            icon: hue:lightstrip
                          - type: custom:mushroom-light-card
                            entity: light.faretti_ufficio
                            show_brightness_control: true
                            show_color_control: true
                            use_light_color: true
                            show_color_temp_control: true
                            tap_action:
                              action: call-service
                              service: light.toggle
                              service_data:
                                transition: 2
                                kelvin: 3900
                                brightness: 255
                              target:
                                entity_id:
                                  - light.hue_color_spot_1
                                  - light.hue_color_spot_3
                                  - light.hue_color_spot_4
                            name: Faretti ufficio
                            icon: hue:double-spot
                        square: false
                        columns: 1
                icon: hue:room-office
                name: ' '
                icon_color: amber
                layout: vertical
                secondary_info: none
                primary_info: none
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
          - square: false
            columns: 6
            type: grid
            cards:
              - type: custom:mushroom-entity-card
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id: light.scale_2
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                icon: hue:room-stairs
                entity: light.scale_2
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: switch.0x00124b0026b6c13a
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: hue:room-bbq
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: switch.0x00124b0026b7a69e
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                icon: hue:room-terrace
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: light.svapo
                tap_action:
                  action: call-service
                  service: light.toggle
                  service_data:
                    transition: 2
                    kelvin: 3900
                    brightness: 255
                  target:
                    entity_id:
                      - light.svapo
                      - light.0xcc86ecfffe1c5e12
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: hue:room-garage
                name: ' '
                icon_color: amber
                layout: vertical
                primary_info: none
                secondary_info: none
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: switch.0x00124b0026b6b731
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                icon: hue:room-attic
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
              - type: custom:mushroom-entity-card
                entity: switch.0x00124b0026b79c3d
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                name: ' '
                layout: vertical
                secondary_info: none
                primary_info: none
                icon_color: amber
                icon: hue:room-carport
                card_mod:
                  style:
                    .: |
                      ha-card {
                      height: 55px !important; 
                      }
        view_layout:
          position: main
      - type: custom:mushroom-title-card
        title: '------ Clima ------'
        alignment: center
        subtitle: ''
      - square: false
        columns: 4
        type: grid
        cards:
          - type: custom:mushroom-template-card
            primary: Purificatori
            secondary: ''
            icon: >-
              {% if is_state('fan.mi_air_purifier_3_3h', 'on') and
              is_state('fan.purificatore_aria', 'on') %}

              mdi:air-purifier

              {% elif is_state('fan.mi_air_purifier_3_3h', 'on') and
              is_state('fan.purificatore_aria', 'off') %}

              mdi:air-purifier

              {% elif is_state('fan.mi_air_purifier_3_3h', 'off') and
              is_state('fan.purificatore_aria', 'on') %}

              mdi:air-purifier

              {% else %}

              mdi:air-purifier-off

              {% endif %}
            icon_color: >-
              {% if is_state('fan.mi_air_purifier_3_3h', 'on') and
              is_state('fan.purificatore_aria', 'on') %}

              green

              {% elif is_state('fan.mi_air_purifier_3_3h', 'on') and
              is_state('fan.purificatore_aria', 'off') %}

              lime

              {% elif is_state('fan.mi_air_purifier_3_3h', 'off') and
              is_state('fan.purificatore_aria', 'on') %}

              lime

              {% else %}

              grey

              {% endif %}
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni Purificatori
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;  
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-fan-card
                        entity: fan.mi_air_purifier_3_3h
                        icon_animation: true
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: more-info
                        name: Purificatore Sala
                        show_percentage_control: true
                        fill_container: false
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-entity-card
                            entity: sensor.mi_air_purifier_3_3h_filter_life_remaining
                            name: Filtro rimasto
                          - type: custom:mushroom-entity-card
                            entity: sensor.mi_air_purifier_3_3h_pm2_5
                            name: PM 2.5
                      - type: custom:mushroom-title-card
                        title: ''
                      - type: custom:mushroom-fan-card
                        entity: fan.purificatore_aria
                        icon_animation: true
                        show_percentage_control: true
                        name: Purificatore camera
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: more-info
                      - type: custom:mushroom-entity-card
                        entity: sensor.purificatore_aria_filter_life
                        name: Filtro rimasto
                        icon: mdi:air-filter
            badge_color: ''
            badge_icon: ''
            hold_action:
              action: call-service
              service: fan.set_percentage
              data:
                percentage: 66
              target:
                entity_id:
                  - fan.mi_air_purifier_3_3h
                  - fan.purificatore_aria
            double_tap_action:
              action: call-service
              service: fan.turn_off
              data: {}
              target:
                entity_id:
                  - fan.mi_air_purifier_3_3h
                  - fan.purificatore_aria
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 85px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        }
          - type: custom:mushroom-template-card
            primary: Sala
            secondary: >-
              {{states('sensor.temperatura_sala') }}°C  ||
              {{states('sensor.umidita_sala') }}%
            icon: mdi:air-conditioner
            entity: climate.daikin_sala
            icon_color: |-
              {% if is_state('climate.daikin_sala', 'cool') %}
              blue
              {% elif is_state('climate.daikin_sala', 'heat') %}
              deep-orange
              {% elif is_state('climate.daikin_sala', 'dry') %}
              amber
              {% elif is_state('climate.daikin_sala', 'fan_only') %}
              brown
              {% else %}
              grey
              {% endif %}
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni A/C Sala
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;  
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        icon: hue:room-dining
                        entity: sensor.thermal_comfort_sala_perception_2
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'dry') %}

                          Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'comfortable') %}

                          Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'very_comfortable') %}

                          Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'ok_but_humid') %}

                          Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'somewhat_uncomfortable') %}

                          Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'quite_uncomfortable') %}

                          Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'extremely_uncomfortable') %}

                          Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'severely_high') %}

                          Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Temperatura percepita: {{
                          states('sensor.thermal_comfort_sala_heatindex_2') }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 55px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.temperatura_sala'') }}°C'
                            icon: mdi:thermometer-lines
                            entity: sensor.temperatura_sala
                            icon_color: >-
                              {% if ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 28.0 %}

                              red

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 24.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 28.0%}

                              orange

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 24.0%}

                              green

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 18.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 20.0%}

                              light-green

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 55px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.umidita_sala'') }}%'
                            icon: mdi:water-percent
                            entity: sensor.umidita_sala
                            icon_color: >-
                              {% if ( states( 'sensor.umidita_sala' ) | float )
                              > 80.0 %}

                              blue

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) > 60.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 80.0%}

                              light-blue

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) > 40.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 60.0%}

                              green

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) > 20.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 40.0%}

                              amber0

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) < 20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 55px !important;
                                  }
                      - type: grid
                        cards:
                          - type: custom:simple-thermostat
                            entity: climate.daikin_sala
                            step_size: '0.5'
                            hide:
                              temperature: true
                              state: true
                            layout:
                              mode:
                                icons: true
                                names: true
                                headings: false
                              step: arrow
                            header: false
                            control:
                              hvac:
                                heat_cool: false
                              fan: true
                              swing: true
                            fallback: 'Off'
                        columns: 1
                        square: false
                      - type: grid
                        cards:
                          - type: custom:mushroom-title-card
                            title: ''
                            subtitle: >-
                              {% if is_state('timer.timer_30min_hvac_sala',
                              'active') %}

                              Timer: attivo 30 minuti

                              {% elif is_state('timer.timer_1hr_hvac_sala',
                              'active') %}

                              Timer: attivo 1 ora

                              {% elif is_state('timer.timer_2hr_hvac_sala',
                              'active') %}

                              Timer: attivo 2 ore

                              {% else %}

                              Opzioni Timer:

                              {% endif %}
                          - type: custom:timer-bar-card
                            entities:
                              - timer.timer_30min_hvac_sala
                              - timer.timer_1hr_hvac_sala
                              - timer.timer_2hr_hvac_sala
                            bar_direction: rtl
                            invert: true
                            compressed: true
                            bar_foreground: linear-gradient(to right, green, yellow,red)
                            layout: full_row
                            filter: true
                            bar_radius: 10px
                            bar_height: 10px
                            text_width: 6em
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 20px !important; 
                                  }
                          - square: false
                            columns: 4
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if is_state('timer.timer_30min_hvac_sala',
                                  'active') %}

                                  30 min

                                  {% else %}

                                  30 min

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_2hr_hvac_sala
                                icon_color: >-
                                  {% if is_state('timer.timer_30min_hvac_sala',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_30min_hvac_sala
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if is_state('timer.timer_1hr_hvac_sala',
                                  'active') %}

                                  1 ora

                                  {% else %}

                                  1 ora

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_1hr_hvac_sala
                                icon_color: >-
                                  {% if is_state('timer.timer_1hr_hvac_sala',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_1hr_hvac_sala
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if is_state('timer.timer_2hr_hvac_sala',
                                  'active') %}

                                  2 ore

                                  {% else %}

                                  2 ore

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_2hr_hvac_sala
                                icon_color: >-
                                  {% if is_state('timer.timer_2hr_hvac_sala',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_2hr_hvac_sala
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: Stop
                                icon: mdi:stop
                                entity: timer.timer_1hr_hvac_salotto
                                icon_color: >-
                                  {% if is_state('timer.timer_30min_hvac_sala',
                                  'active') or
                                  is_state('timer.timer_1hr_hvac_sala',
                                  'active') or
                                  is_state('timer.timer_2hr_hvac_sala',
                                  'active') %}

                                  red

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.cancel
                                  data: {}
                                  target:
                                    entity_id:
                                      - timer.timer_2hr_hvac_sala
                                      - timer.timer_1hr_hvac_sala
                                      - timer.timer_30min_hvac_sala
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                        square: false
                        columns: 1
            badge_color: >-
              {% if is_state('input_boolean.clima_automatico_nodered', 'on') and
              is_state('input_boolean.clima_automatico_notte_nodered', 'on') %}

              teal

              {% elif is_state('input_boolean.clima_automatico_nodered', 'on')
              and is_state('input_boolean.clima_automatico_notte_nodered',
              'off') %}

              amber

              {% elif is_state('input_boolean.clima_automatico_nodered', 'off')
              and is_state('input_boolean.clima_automatico_notte_nodered', 'on')
              %}

              blue-grey

              {% else %}

              red

              {% endif %}
            badge_icon: >-
              {% if is_state('input_boolean.clima_automatico_nodered', 'on') and
              is_state('input_boolean.clima_automatico_notte_nodered', 'on') %}

              mdi:thermometer-auto

              {% elif is_state('input_boolean.clima_automatico_nodered', 'on')
              and is_state('input_boolean.clima_automatico_notte_nodered',
              'off') %}

              mdi:sun-thermometer-outline

              {% elif is_state('input_boolean.clima_automatico_nodered', 'off')
              and is_state('input_boolean.clima_automatico_notte_nodered', 'on')
              %}

              mdi:weather-night

              {% else %}

              mdi:thermometer-auto

              {% endif %}
            hold_action:
              action: toggle
            double_tap_action:
              action: toggle
            multiline_secondary: false
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 85px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            primary: Salotto
            secondary: >-
              {{states('sensor.temperatura_salotto') }}°C  ||
              {{states('sensor.umidita_salotto') }}%
            icon: mdi:air-conditioner
            entity: climate.daikin_salotto
            icon_color: |-
              {% if is_state('climate.daikin_salotto', 'cool') %}
              blue
              {% elif is_state('climate.daikin_salotto', 'heat') %}
              deep-orange
              {% elif is_state('climate.daikin_salotto', 'dry') %}
              amber
              {% elif is_state('climate.daikin_salotto', 'fan_only') %}
              brown
              {% else %}
              grey
              {% endif %}
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni A/C Salotto
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;  
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        icon: hue:room-living
                        entity: sensor.thermal_comfort_salotto_perception
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'dry') %}

                          Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'comfortable') %}

                          Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'very_comfortable') %}

                          Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'ok_but_humid') %}

                          Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'somewhat_uncomfortable') %}

                          Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'quite_uncomfortable') %}

                          Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'extremely_uncomfortable') %}

                          Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'severely_high') %}

                          Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Temperatura percepita: {{
                          states('sensor.thermal_comfort_salotto_heatindex')
                          }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 55px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.temperatura_salotto'') }}°C'
                            icon: mdi:thermometer-lines
                            entity: sensor.temperatura_salotto
                            icon_color: >-
                              {% if ( states( 'sensor.temperatura_salotto' ) |
                              float ) >= 28.0
                               %}

                               red

                               {% elif ( states( 'sensor.temperatura_salotto' ) | float ) >= 24.0
                               and ( states( 'sensor.temperatura_salotto' ) | float ) < 28.0%}

                               orange

                               {% elif ( states( 'sensor.temperatura_salotto' ) | float ) >= 20.0
                               and ( states( 'sensor.temperatura_salotto' ) | float ) < 24.0%}

                               green

                               {% elif ( states( 'sensor.temperatura_salotto' ) | float ) >= 18.0
                               and ( states( 'sensor.temperatura_salotto' ) | float ) < 20.0%}

                               light-green

                               {% elif ( states( 'sensor.temperatura_salotto' ) | float ) < 18.0
                               %}

                               blue

                               {% else %}

                               black

                               {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 55px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.umidita_salotto'') }}%'
                            icon: mdi:water-percent
                            entity: sensor.umidita_salotto
                            icon_color: >-
                              {% if ( states( 'sensor.umidita_salotto' ) | float
                              ) > 80.0 %}

                              blue

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) > 60.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 80.0%}

                              light-blue

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) > 40.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 60.0%}

                              green

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) > 20.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 40.0%}

                              amber

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) < 20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 55px !important;
                                  }
                      - type: grid
                        cards:
                          - type: custom:simple-thermostat
                            entity: climate.daikin_salotto
                            step_size: '0.5'
                            hide:
                              temperature: true
                              state: true
                            layout:
                              mode:
                                icons: true
                                names: true
                                headings: false
                              step: arrow
                            header: false
                            control:
                              hvac:
                                heat_cool: false
                              fan: true
                              swing: true
                            fallback: 'Off'
                        columns: 1
                        square: false
                      - type: grid
                        cards:
                          - type: custom:mushroom-title-card
                            title: ''
                            subtitle: >-
                              {% if is_state('timer.timer_30min_hvac_salotto',
                              'active') %}

                              Timer: attivo 30 minuti

                              {% elif is_state('timer.timer_1hr_hvac_salotto',
                              'active') %}

                              Timer: attivo 1 ora

                              {% elif is_state('timer.timer_2hr_hvac_salotto',
                              'active') %}

                              Timer: attivo 2 ore

                              {% else %}

                              Opzioni Timer:

                              {% endif %}
                          - type: custom:timer-bar-card
                            entities:
                              - timer.timer_30min_hvac_salotto
                              - timer.timer_1hr_hvac_salotto
                              - timer.timer_2hr_hvac_salotto
                            bar_direction: rtl
                            invert: true
                            compressed: true
                            bar_foreground: linear-gradient(to right, green, yellow,red)
                            layout: full_row
                            filter: true
                            bar_radius: 10px
                            bar_height: 10px
                            text_width: 6em
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 20px !important; 
                                  }
                          - square: false
                            columns: 4
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if
                                  is_state('timer.timer_30min_hvac_salotto',
                                  'active') %}

                                  30 min

                                  {% else %}

                                  30 min

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_2hr_hvac_salotto
                                icon_color: >-
                                  {% if
                                  is_state('timer.timer_30min_hvac_salotto',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_30min_hvac_salotto
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if is_state('timer.timer_1hr_hvac_salotto',
                                  'active') %}

                                  1 ora

                                  {% else %}

                                  1 ora

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_1hr_hvac_salotto
                                icon_color: >-
                                  {% if is_state('timer.timer_1hr_hvac_salotto',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_1hr_hvac_salotto
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: >-
                                  {% if is_state('timer.timer_2hr_hvac_salotto',
                                  'active') %}

                                  2 ore

                                  {% else %}

                                  2 ore

                                  {% endif %}
                                icon: mdi:timer
                                entity: timer.timer_2hr_hvac_salotto
                                icon_color: >-
                                  {% if is_state('timer.timer_2hr_hvac_salotto',
                                  'active') %}

                                  green

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.start
                                  data: {}
                                  target:
                                    entity_id: timer.timer_2hr_hvac_salotto
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: Stop
                                icon: mdi:stop
                                entity: timer.timer_1hr_hvac_salotto
                                icon_color: >-
                                  {% if
                                  is_state('timer.timer_30min_hvac_salotto',
                                  'active') or
                                  is_state('timer.timer_1hr_hvac_salotto',
                                  'active') or
                                  is_state('timer.timer_2hr_hvac_salotto',
                                  'active') %}

                                  red

                                  {% else %}

                                  grey

                                  {% endif %}
                                tap_action:
                                  action: call-service
                                  service: timer.cancel
                                  data: {}
                                  target:
                                    entity_id:
                                      - timer.timer_2hr_hvac_salotto
                                      - timer.timer_1hr_hvac_salotto
                                      - timer.timer_30min_hvac_salotto
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: vertical
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      border-radius: 25px !important;
                                      height: 85px !important;
                                      }
                        square: false
                        columns: 1
            badge_color: >-
              {% if is_state('input_boolean.clima_automatico_nodered', 'on') and
              is_state('input_boolean.clima_automatico_notte_nodered', 'on') %}

              teal

              {% elif is_state('input_boolean.clima_automatico_nodered', 'on')
              and is_state('input_boolean.clima_automatico_notte_nodered',
              'off') %}

              amber

              {% elif is_state('input_boolean.clima_automatico_nodered', 'off')
              and is_state('input_boolean.clima_automatico_notte_nodered', 'on')
              %}

              blue-grey

              {% else %}

              red

              {% endif %}
            badge_icon: >-
              {% if is_state('input_boolean.clima_automatico_nodered', 'on') and
              is_state('input_boolean.clima_automatico_notte_nodered', 'on') %}

              mdi:thermometer-auto

              {% elif is_state('input_boolean.clima_automatico_nodered', 'on')
              and is_state('input_boolean.clima_automatico_notte_nodered',
              'off') %}

              mdi:sun-thermometer-outline

              {% elif is_state('input_boolean.clima_automatico_nodered', 'off')
              and is_state('input_boolean.clima_automatico_notte_nodered', 'on')
              %}

              mdi:weather-night

              {% else %}

              mdi:thermometer-auto

              {% endif %}
            fill_container: false
            multiline_secondary: false
            hold_action:
              action: toggle
            double_tap_action:
              action: toggle
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 85px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: |-
              {% if is_state('weather.accuweather', 'partlycloudy') %}
              mdi:weather-partly-cloudy
              {% elif is_state('weather.accuweather', 'cloudy') %}
              mdi:weather-cloudy
              {% elif is_state('weather.accuweather', 'clear-night') %}
              mdi:weather-night
              {% elif is_state('weather.accuweather', 'exceptional') %}
              mdi:sun-wireless-outline
              {% elif is_state('weather.accuweather', 'sunny') %}
              mdi:weather-sunny
              {% elif is_state('weather.accuweather', 'fog') %}
              mdi:weather-fog
              {% elif is_state('weather.accuweather', 'hail') %}
              mdi:weather-hail
              {% elif is_state('weather.accuweather', 'rainy') %}
              mdi:weather-rainy
              {% elif is_state('weather.accuweather', 'pouring') %}
              mdi:weather-pouring
              {% elif is_state('weather.accuweather', 'snowy') %}
              mdi:weather-snowy
              {% elif is_state('weather.accuweather', 'snowy-rainy') %}
              mdi:weather-snowy-rainy
              {% elif is_state('weather.accuweather', 'windy') %}
              mdi:weather-windy
              {% elif is_state('weather.accuweather', 'windy-variant') %}
              mdi:weather-windy-variant
              {% elif is_state('weather.accuweather', 'lightning') %}
              mdi:weather-lightning
              {% elif is_state('weather.accuweather', 'lightning-rainy') %}
              mdi:weather-lightning-rainy
              {% else %}
              mdi:weather-hurricane
              {% endif %}
            layout: vertical
            icon_color: >-
              {% if ( states( 'sensor.temperatura_casa' ) | float ) >= 29.0 %}

              red

              {% elif ( states( 'sensor.temperatura_casa' ) | float ) >= 24.0
              and ( states( 'sensor.temperatura_casa' ) | float ) < 29.0%}

              orange

              {% elif ( states( 'sensor.temperatura_casa' ) | float ) >= 20.0
              and ( states( 'sensor.temperatura_casa' ) | float ) < 24.0%}

              green

              {% elif ( states( 'sensor.temperatura_casa' ) | float ) >= 18.0
              and ( states( 'sensor.temperatura_casa' ) | float ) < 20.0%}

              light-green

              {% elif ( states( 'sensor.temperatura_casa' ) | float ) < 18.0 %}

              blue

              {% else %}

              black

              {% endif %}
            hold_action:
              action: none
            double_tap_action:
              action: none
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Clima
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        primary: >-
                          {% if is_state('weather.accuweather', 'partlycloudy')
                          %}

                          Parzialmente Nuvoloso

                          {% elif is_state('weather.accuweather', 'cloudy') %}

                          Nuvoloso

                          {% elif is_state('weather.accuweather', 'clear-night')
                          %}

                          Notte Serena

                          {% elif is_state('weather.accuweather', 'exceptional')
                          %}

                          Eccezionale

                          {% elif is_state('weather.accuweather', 'sunny') %}

                          Soleggiato

                          {% elif is_state('weather.accuweather', 'fog') %}

                          Nebbie Sparse

                          {% elif is_state('weather.accuweather', 'hail') %}

                          !!! Grandine !!!

                          {% elif is_state('weather.accuweather', 'rainy') %}

                          Precipitazioni

                          {% elif is_state('weather.accuweather', 'pouring') %}

                          Forti Precipitazioni

                          {% elif is_state('weather.accuweather', 'snowy') %}

                          Nevicate

                          {% elif is_state('weather.accuweather', 'snowy-rainy')
                          %}

                          Nevicate con Pioggia

                          {% elif is_state('weather.accuweather', 'windy') %}

                          Vento

                          {% elif is_state('weather.accuweather',
                          'windy-variant') %}

                          Vento con Maltempo

                          {% elif is_state('weather.accuweather', 'lightning')
                          %}

                          Temporali

                          {% elif is_state('weather.accuweather',
                          'lightning-rainy') %}

                          Temporali con precipitazioni

                          {% else %}

                          Non Disponibile

                          {% endif %}
                        icon: >-
                          {% if is_state('weather.accuweather', 'partlycloudy')
                          %}

                          mdi:weather-partly-cloudy

                          {% elif is_state('weather.accuweather', 'cloudy') %}

                          mdi:weather-cloudy

                          {% elif is_state('weather.accuweather', 'clear-night')
                          %}

                          mdi:weather-night

                          {% elif is_state('weather.accuweather', 'exceptional')
                          %}

                          mdi:sun-wireless-outline

                          {% elif is_state('weather.accuweather', 'sunny') %}

                          mdi:weather-sunny

                          {% elif is_state('weather.accuweather', 'fog') %}

                          mdi:weather-fog

                          {% elif is_state('weather.accuweather', 'hail') %}

                          mdi:weather-hail

                          {% elif is_state('weather.accuweather', 'rainy') %}

                          mdi:weather-rainy

                          {% elif is_state('weather.accuweather', 'pouring') %}

                          mdi:weather-pouring

                          {% elif is_state('weather.accuweather', 'snowy') %}

                          mdi:weather-snowy

                          {% elif is_state('weather.accuweather', 'snowy-rainy')
                          %}

                          mdi:weather-snowy-rainy

                          {% elif is_state('weather.accuweather', 'windy') %}

                          mdi:weather-windy

                          {% elif is_state('weather.accuweather',
                          'windy-variant') %}

                          mdi:weather-windy-variant

                          {% elif is_state('weather.accuweather', 'lightning')
                          %}

                          mdi:weather-lightning

                          {% elif is_state('weather.accuweather',
                          'lightning-rainy') %}

                          mdi:weather-lightning-rainy

                          {% else %}

                          mdi:weather-hurricane

                          {% endif %}
                        entity: weather.accuweather
                        icon_color: >-
                          {% if is_state('weather.accuweather', 'partlycloudy')
                          %}

                          grey

                          {% elif is_state('weather.accuweather', 'cloudy') %}

                          grey

                          {% elif is_state('weather.accuweather', 'clear-night')
                          %}

                          blue-grey

                          {% elif is_state('weather.accuweather', 'exceptional')
                          %}

                          yellow

                          {% elif is_state('weather.accuweather', 'sunny') %}

                          yellow

                          {% elif is_state('weather.accuweather', 'fog') %}

                          grey

                          {% elif is_state('weather.accuweather', 'hail') %}

                          red

                          {% elif is_state('weather.accuweather', 'rainy') %}

                          cyan

                          {% elif is_state('weather.accuweather', 'pouring') %}

                          blue

                          {% elif is_state('weather.accuweather', 'snowy') %}

                          white

                          {% elif is_state('weather.accuweather', 'snowy-rainy')
                          %}

                          light-blue

                          {% elif is_state('weather.accuweather', 'windy') %}

                          brown

                          {% elif is_state('weather.accuweather',
                          'windy-variant') %}

                          brown

                          {% elif is_state('weather.accuweather', 'lightning')
                          %}

                          purple

                          {% elif is_state('weather.accuweather',
                          'lightning-rainy') %}

                          indigo

                          {% else %}

                          black

                          {% endif %}
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        layout: horizontal
                        secondary: >-
                          Temperatura: {{ state_attr('weather.accuweather',
                          'temperature') }}°C || Umidità: {{
                          state_attr('weather.accuweather', 'humidity') }}%
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 65px !important;
                              }
                              :host {
                                    --mush-icon-size: 50px;
                                    --mush-card-primary-font-size: 16px;
                                    --mush-card-primary-line-height: 1.5;
                                    }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: ''
                        alignment: center
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 0px !important;
                              }
                              :host {
                                    --mush-spacing: 2px !important;
                                    --mush-title-spacing: 1px;
                                    --mush-title-line-height: 0.1 !important;
                                    }
                      - type: custom:mushroom-template-card
                        icon: hue:room-dining
                        entity: sensor.thermal_comfort_sala_perception_2
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'dry') %}

                          Clima Sala: Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'comfortable') %}

                          Clima Sala: Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'very_comfortable') %}

                          Clima Sala: Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'ok_but_humid') %}

                          Clima Sala: Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'somewhat_uncomfortable') %}

                          Clima Sala: Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'quite_uncomfortable') %}

                          Clima Sala: Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'extremely_uncomfortable') %}

                          Clima Sala: Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_sala_perception_2',
                          'severely_high') %}

                          Clima Sala: Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Percepito: {{
                          states('sensor.thermal_comfort_sala_heatindex_2') }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 50px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.temperatura_sala'') }}°C'
                            icon: mdi:thermometer-lines
                            entity: sensor.temperatura_sala
                            icon_color: >-
                              {% if ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 29.0 %}

                              red

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 24.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 29.0%}

                              orange

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 24.0%}

                              green

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) >= 18.0 and ( states(
                              'sensor.temperatura_sala' ) | float ) < 20.0%}

                              light-green

                              {% elif ( states( 'sensor.temperatura_sala' ) |
                              float ) < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.umidita_sala'') }}%'
                            icon: mdi:water-percent
                            entity: sensor.umidita_sala
                            icon_color: >-
                              {% if ( states( 'sensor.umidita_sala' ) | float )
                              >= 80.0 %}

                              blue

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) >= 60.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 80.0%}

                              light-blue

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) >= 40.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 60.0%}

                              green

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) >= 20.0 and ( states( 'sensor.umidita_sala' ) |
                              float ) < 40.0%}

                              amber

                              {% elif ( states( 'sensor.umidita_sala' ) | float
                              ) < 20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: ''
                        alignment: center
                      - type: custom:mushroom-template-card
                        icon: hue:room-living
                        entity: sensor.thermal_comfort_salotto_perception
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'dry') %}

                          Clima Salotto: Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'comfortable') %}

                          Clima Salotto: Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'very_comfortable') %}

                          Clima Salotto: Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'ok_but_humid') %}

                          Clima Salotto: Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'somewhat_uncomfortable') %}

                          Clima Salotto: Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'quite_uncomfortable') %}

                          Clima Salotto: Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'extremely_uncomfortable') %}

                          Clima Salotto: Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_salotto_perception',
                          'severely_high') %}

                          Clima Salotto: Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Percepito: {{
                          states('sensor.thermal_comfort_salotto_heatindex')
                          }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 50px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.temperatura_salotto'') }}°C'
                            icon: mdi:thermometer-lines
                            entity: sensor.temperatura_salotto
                            icon_color: >-
                              {% if ( states( 'sensor.temperatura_salotto' ) |
                              float ) >= 29.0 %}

                              red

                              {% elif ( states( 'sensor.temperatura_salotto' ) |
                              float ) >= 24.0 and ( states(
                              'sensor.temperatura_salotto' ) | float ) < 29.0%}

                              orange

                              {% elif ( states( 'sensor.temperatura_salotto' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.temperatura_salotto' ) | float ) < 24.0%}

                              green

                              {% elif ( states( 'sensor.temperatura_salotto' ) |
                              float ) >= 18.0 and ( states(
                              'sensor.temperatura_salotto' ) | float ) < 20.0%}

                              light-green

                              {% elif ( states( 'sensor.temperatura_salotto' ) |
                              float ) < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            secondary: ''
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.umidita_salotto'') }}%'
                            icon: mdi:water-percent
                            entity: sensor.umidita_salotto
                            icon_color: >-
                              {% if ( states( 'sensor.umidita_salotto' ) | float
                              ) >= 80.0 %}

                              blue

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) >= 60.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 80.0%}

                              light-blue

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) >= 40.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 60.0%}

                              green

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.umidita_salotto' ) | float ) < 40.0%}

                              amber

                              {% elif ( states( 'sensor.umidita_salotto' ) |
                              float ) < 20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: ''
                        alignment: center
                      - type: custom:mushroom-template-card
                        icon: hue:room-bedroom
                        entity: sensor.thermal_comfort_camera_perception
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_camera_perception',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_camera_perception',
                          'dry') %}

                          Clima Camera: Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'comfortable') %}

                          Clima Camera: Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'very_comfortable') %}

                          Clima Camera: Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'ok_but_humid') %}

                          Clima Camera: Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'somewhat_uncomfortable') %}

                          Clima Camera: Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'quite_uncomfortable') %}

                          Clima Camera: Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'extremely_uncomfortable') %}

                          Clima Camera: Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_camera_perception',
                          'severely_high') %}

                          Clima Camera: Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Percepito: {{
                          states('sensor.thermal_comfort_camera_heatindex') }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 50px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.temperatura_camera'') }}°C'
                            icon: mdi:thermometer-lines
                            entity: sensor.temperatura_camera
                            icon_color: >-
                              {% if ( states( 'sensor.temperatura_camera' ) |
                              float ) >= 29.0 %}

                              red

                              {% elif ( states( 'sensor.temperatura_camera' ) |
                              float ) >= 24.0 and ( states(
                              'sensor.temperatura_camera' ) | float ) < 29.0%}

                              orange

                              {% elif ( states( 'sensor.temperatura_camera' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.temperatura_camera' ) | float ) < 24.0%}

                              green

                              {% elif ( states( 'sensor.temperatura_camera' ) |
                              float ) >= 18.0 and ( states(
                              'sensor.temperatura_camera' ) | float ) < 20.0%}

                              light-green

                              {% elif ( states( 'sensor.temperatura_camera' ) |
                              float ) < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: '{{ states(''sensor.umidita_camera'') }}%'
                            icon: mdi:water-percent
                            entity: sensor.umidita_camera
                            icon_color: >-
                              {% if ( states( 'sensor.umidita_camera' ) | float
                              ) >= 80.0 %}

                              blue

                              {% elif ( states( 'sensor.umidita_camera' ) |
                              float ) >= 60.0 and ( states(
                              'sensor.umidita_camera' ) | float ) < 80.0%}

                              light-blue

                              {% elif ( states( 'sensor.umidita_camera' ) |
                              float ) >= 40.0 and ( states(
                              'sensor.umidita_camera' ) | float ) < 60.0%}

                              green

                              {% elif ( states( 'sensor.umidita_camera' ) |
                              float ) >= 20.0 and ( states(
                              'sensor.umidita_camera' ) | float ) < 40.0%}

                              amber

                              {% elif ( states( 'sensor.umidita_camera' ) |
                              float ) < 20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            secondary: ''
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: ''
                        alignment: center
                      - type: custom:mushroom-template-card
                        icon: hue:room-bathroom
                        entity: sensor.thermal_comfort_bagno_perception
                        icon_color: >-
                          {% if
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'dry') %}

                          amber

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'comfortable') %}

                          light-green

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'very_comfortable') %}

                          green

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'ok_but_humid') %}

                          cyan

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'somewhat_uncomfortable') %}

                          orange

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'quite_uncomfortable') %}

                          red

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'extremely_uncomfortable') %}

                          pink

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'severely_high') %}

                          pink

                          {% else %}

                          black

                          {% endif %}
                        primary: >-
                          {% if
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'dry') %}

                          Clima Bagno: Un po' secco

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'comfortable') %}

                          Clima Bagno: Confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'very_comfortable') %}

                          Clima Bagno: Molto confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'ok_but_humid') %}

                          Clima Bagno: Ok ma umido

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'somewhat_uncomfortable') %}

                          Clima Bagno: Poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'quite_uncomfortable') %}

                          Clima Bagno: Molto poco confrortevole

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'extremely_uncomfortable') %}

                          Clima Bagno: Estremamente poco confortevole

                          {% elif
                          is_state('sensor.thermal_comfort_bagno_perception',
                          'severely_high') %}

                          Clima Bagno: Rischio per la salute

                          {% else %}

                          Nessuna informazione disponibile

                          {% endif %}
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        hold_action:
                          action: none
                        secondary: >-
                          Percepito: {{
                          states('sensor.thermal_comfort_bagno_heatindex') }}°C
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 50px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{ states('sensor.0x00158d00075a7f85_temperature')
                              }}°C
                            icon: mdi:thermometer-lines
                            entity: sensor.0x00158d00075a7f85_temperature
                            icon_color: >-
                              {% if ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) >= 26.0 %}

                              red

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) >= 24.0 and ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) < 26.0%}

                              orange

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) >= 20.0 and ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) < 24.0%}

                              green

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) >= 18.0 and ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) < 20.0%}

                              light-green

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_temperature' ) | float
                              ) < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{ states('sensor.0x00158d00075a7f85_humidity')
                              }}%
                            icon: mdi:water-percent
                            entity: sensor.0x00158d00075a7f85_humidity
                            icon_color: >-
                              {% if ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float )
                              >= 80.0 %}

                              blue

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float )
                              >= 60.0 and ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float ) <
                              80.0%}

                              light-blue

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float )
                              >= 40.0 and ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float ) <
                              60.0%}

                              green

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float )
                              >= 20.0 and ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float ) <
                              40.0%}

                              amber

                              {% elif ( states(
                              'sensor.0x00158d00075a7f85_humidity' ) | float ) <
                              20.0 %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: ''
                        alignment: center
                      - square: false
                        columns: 3
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{ states('sensor.temperatura_frigo_corretta')
                              }}°C
                            icon: mdi:snowflake
                            entity: sensor.temperatura_frigo_corretta
                            icon_color: >-
                              {% if ( states(
                              'sensor.temperatura_frigo_corretta' ) | float ) >=
                              9.00 %}

                              red

                              {% elif ( states(
                              'sensor.temperatura_frigo_corretta' ) | float ) >=
                              7.00 and ( states(
                              'sensor.temperatura_frigo_corretta' ) | float ) <
                              9.00%}

                              cyan

                              {% elif ( states(
                              'sensor.temperatura_frigo_corretta' ) | float ) <
                              7.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            layout: horizontal
                            secondary: >-
                              {{ states('sensor.0x00158d00075a7f41_humidity')
                              }}%
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                                  :host {
                                        --mush-icon-size: 35px;
                                        --mush-card-primary-font-size: 12px;
                                        }
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{ states('sensor.0x00158d0007df5ba4_temperature')
                              }}°C
                            icon: mdi:snowflake-variant
                            entity: sensor.0x00158d0007df5ba4_temperature
                            icon_color: >-
                              {% if ( states(
                              'sensor.0x00158d0007df5ba4_temperature' ) | float
                              ) >= -5.00 %}

                              red

                              {% elif ( states(
                              'sensor.0x00158d0007df5ba4_temperature' ) | float
                              ) >= -14.00 and ( states(
                              'sensor.0x00158d0007df5ba4_temperature' ) | float
                              ) < -5.00%}

                              orange

                              {% elif ( states(
                              'sensor.0x00158d0007df5ba4_temperature' ) | float
                              ) < -14.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            layout: horizontal
                            secondary: >-
                              {{ states('sensor.0x00158d0007df5ba4_humidity')
                              }}%
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                                  :host {
                                        --mush-icon-size: 35px;
                                        --mush-card-primary-font-size: 12px;
                                        }
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{ states('sensor.sonoff_a48001620f_temperature')
                              }}°C
                            icon: hue:room-carport
                            entity: sensor.sonoff_a48001620f_temperature
                            icon_color: >-
                              {% if ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              >= 26.0 %}

                              red

                              {% elif ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              >= 24.0 and ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              < 26.0%}

                              orange

                              {% elif ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              >= 20.0 and ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              < 24.0%}

                              green

                              {% elif ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              >= 18.0 and ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              < 20.0%}

                              light-green

                              {% elif ( states(
                              'sensor.sonoff_a48001620f_temperature' ) | float )
                              < 18.0 %}

                              blue

                              {% else %}

                              black

                              {% endif %}
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            layout: horizontal
                            secondary: '{{ states(''sensor.sonoff_a48001620f_humidity'') }}%'
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                    height: 50px !important;
                                  }
                                  :host {
                                        --mush-icon-size: 35px;
                                        --mush-card-primary-font-size: 12px;
                                        }
            entity: sensor.temperatura_sala
            secondary: >-
              {{ state_attr('weather.accuweather', 'temperature') }}°C || {{
              state_attr('weather.accuweather', 'humidity') }}%
            badge_color: ''
            badge_icon: ''
            primary: Clima
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 85px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
      - type: custom:mushroom-title-card
        title: '------ Accessi ------'
        alignment: center
        subtitle: ''
      - square: false
        columns: 7
        type: grid
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007bf130c_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Porta Ingresso
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007d12925_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            icon: hue:room-kitchen
            name: Finestra Cucina
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007b7daef_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra Bagno
            icon: hue:room-bathroom
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007ef5a4e_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra Camera
            icon: hue:room-bedroom
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007ecdbf6_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra sopra piccola
            icon: hue:room-living
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007d207df_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Terrazza sotto
            icon: mdi:grill-outline
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007e63a54_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra Sala
            icon: hue:downstairs
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007d12896_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Terrazza sopra
            icon: hue:room-terrace
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00158d0007ecdb4c_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra sopra
            icon: hue:upstairs
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00124b0023ebc150_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Porta svapo
            icon: hue:room-garage
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00124b002247a7a3_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Finestra server
            icon: hue:ceiling-aurelle
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00124b00234468de_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Porta sottotetto
            icon: hue:room-attic
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00124b002344b292_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Porta garage
            icon: hue:room-carport
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
          - type: custom:mushroom-entity-card
            entity: binary_sensor.0x00124b0023ebb4c2_contact
            primary_info: none
            secondary_info: none
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            layout: vertical
            icon_color: cyan
            name: Basculante garage
            icon: mdi:garage-lock
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 50px !important;
                    #background: teal;
                  }
      - type: custom:mushroom-title-card
        title: '------ Altro ------'
        alignment: center
        subtitle: ''
      - square: false
        columns: 4
        type: grid
        cards:
          - type: custom:mushroom-template-card
            icon: mdi:robot-vacuum
            layout: vertical
            hold_action:
              action: none
            double_tap_action:
              action: none
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni Roomba
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;  
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        primary: |-
                          {% if is_state('vacuum.roomba966', 'cleaning') %}
                          Roomba in pulizia
                          {% elif is_state('vacuum.roomba966', 'returning') %}
                          Roomba sta tornando alla base
                          {% elif is_state('vacuum.roomba966', 'error') %}
                          Roomba in errore
                          {% elif is_state('vacuum.roomba966', 'paused') %}
                          Roomba in pausa
                          {% elif is_state('vacuum.roomba966', 'idle') %}
                          Roomba in attesa
                          {% elif is_state('vacuum.roomba966', 'docked') %}
                          Roomba in base
                          {% else %}
                          Roomba non raggiungibile
                          {% endif %}
                        secondary: ''
                        icon: mdi:robot-vacuum
                        icon_color: |-
                          {% if is_state('vacuum.roomba966', 'cleaning') %}
                          green
                          {% elif is_state('vacuum.roomba966', 'returning') %}
                          amber
                          {% elif is_state('vacuum.roomba966', 'error') %}
                          red
                          {% elif is_state('vacuum.roomba966', 'paused') %}
                          blue
                          {% elif is_state('vacuum.roomba966', 'idle') %}
                          blue
                          {% elif is_state('vacuum.roomba966', 'unavailable') %}
                          black
                          {% else %}
                          grey
                          {% endif %}
                        entity: vacuum.roomba966
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        layout: vertical
                        card_mod:
                          style:
                            .: |
                              ha-card {
                                height: 100px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-entity-card
                            entity: sensor.roomba966_battery_level
                            name: Batteria
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                          - type: custom:mushroom-entity-card
                            entity: binary_sensor.roomba966_bin_full
                            name: Cestino
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            icon_color: red
                      - square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-entity-card
                            entity: sensor.roomba966_battery_level
                            icon: mdi:play
                            icon_color: green
                            name: Inizia pulizia
                            layout: vertical
                            primary_info: name
                            secondary_info: none
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: vacuum.start
                              service_data: {}
                              target:
                                entity_id: vacuum.roomba966
                          - type: custom:mushroom-entity-card
                            entity: sensor.roomba966_battery_level
                            icon: mdi:stop
                            icon_color: red
                            layout: vertical
                            primary_info: name
                            secondary_info: none
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: vacuum.stop
                              service_data: {}
                              target:
                                entity_id: vacuum.roomba966
                            name: Stop
                          - type: custom:mushroom-entity-card
                            entity: sensor.roomba966_battery_level
                            icon_color: orange
                            layout: vertical
                            primary_info: name
                            secondary_info: none
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: vacuum.return_to_base
                              service_data: {}
                              target:
                                entity_id: vacuum.roomba966
                            name: Ritorna alla base
                            icon: mdi:home-import-outline
            icon_color: |-
              {% if is_state('vacuum.roomba966', 'cleaning') %}
              green
              {% elif is_state('vacuum.roomba966', 'returning') %}
              amber
              {% elif is_state('vacuum.roomba966', 'error') %}
              red
              {% elif is_state('vacuum.roomba966', 'paused') %}
              blue
              {% elif is_state('vacuum.roomba966', 'idle') %}
              blue
              {% elif is_state('vacuum.roomba966', 'unavailable') %}
              black
              {% else %}
              grey
              {% endif %}
            entity: vacuum.roomba966
            secondary: ''
            primary: Roomba
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: mdi:spotify
            entity: media_player.spotify_francesco_raspa
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Opzioni Musica
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        primary: >-
                          {% if is_state('media_player.spotify_francesco_raspa',
                          'idle') %}

                          Lancia spotify

                          {% else %}


                          {% endif %}
                        secondary: ''
                        icon: >-
                          {% if is_state('media_player.spotify_francesco_raspa',
                          'idle') %}

                          mdi:spotify

                          {% else %}


                          {% endif %}
                        icon_color: ''
                        entity: button.spotify_play_tuttacasa
                        tap_action:
                          action: toggle
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        layout: vertical
                        card_mod:
                          style:
                            .: |
                              :host {
                                --ha-card-border-radius: 25px !important;
                              }
                              ha-card {
                              height: 150px;
                              }
                      - type: custom:mini-media-player
                        entity: media_player.spotify_francesco_raspa
                        group: false
                        hide:
                          name: true
                          power: true
                          source: false
                          mute: true
                          prev: true
                          next: true
                          play_pause: true
                          volume: true
                          runtime: false
                        tap_action:
                          action: navigate
                          navigation_path: /media-browser/media_player.spotify_francesco_raspa
                        info: short
                        replace_mute: play_pause
                        artwork: material
                        source: icon
                        sound_mode: full
                        card_mod:
                          style:
                            .: |
                              :host {
                                --ha-card-border-radius: 25px !important;
                                --mini-media-player-scale: 1.11 !important;
                              }
                              ha-card {
                              height: 150px;
                              }
                      - type: custom:mushroom-media-player-card
                        entity: media_player.spotify_francesco_raspa
                        primary_info: none
                        fill_container: false
                        use_media_info: false
                        show_volume_level: false
                        volume_controls: []
                        media_controls:
                          - play_pause_stop
                          - next
                          - shuffle
                          - previous
                        icon_type: none
                        secondary_info: none
                        collapsible_controls: false
                        card_mod:
                          style:
                            .: |
                              :host {
                                --ha-card-border-radius: 25px !important;
                              }
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: ''
                                icon: mdi:volume-mute
                                icon_color: amber
                                layout: vertical
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                tap_action:
                                  action: call-service
                                  service: media_player.volume_set
                                  target:
                                    device_id: 41e87753ecee79629c9cac00fadb9dd1
                                  data:
                                    volume_level: 0
                                card_mod:
                                  style:
                                    .: |
                                      :host {
                                        --ha-card-border-radius: 25px !important;
                                      }
                              - type: custom:mushroom-template-card
                                primary: ''
                                secondary: ''
                                icon: mdi:restore
                                icon_color: blue
                                layout: vertical
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                tap_action:
                                  action: call-service
                                  service: media_player.volume_set
                                  target:
                                    device_id: 41e87753ecee79629c9cac00fadb9dd1
                                  data:
                                    volume_level: 0.4
                                card_mod:
                                  style:
                                    .: |
                                      :host {
                                        --ha-card-border-radius: 25px !important;
                                      }
                          - type: custom:mini-media-player
                            entity: media_player.spotify_francesco_raspa
                            group: false
                            hide:
                              name: true
                              icon: true
                              info: true
                              power: true
                              source: true
                              mute: true
                              prev: true
                              next: true
                              progress: true
                              play_pause: true
                            info: scroll
                            replace_mute: play_pause
                            artwork: cover
                            source: full
                            sound_mode: full
                            toggle_power: false
                            card_mod:
                              style:
                                .: |
                                  :host {
                                    --ha-card-border-radius: 25px !important;
                                    --mini-media-player-scale: 1 !important;
                                  }
                                  ha-card {
                                  height: 65px;
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: '----- Multi-room Speakers -----'
                        alignment: center
                      - type: custom:mini-media-player
                        entity: media_player.spotify_francesco_raspa
                        group: true
                        hide:
                          name: true
                          power: true
                          source: true
                          mute: true
                          prev: true
                          next: true
                          play_pause: true
                          volume: true
                          runtime: true
                          info: true
                          icon: true
                          progress: true
                        info: short
                        replace_mute: play_pause
                        artwork: none
                        source: icon
                        sound_mode: full
                        shortcuts:
                          columns: 3
                          buttons:
                            - icon: hue:home
                              type: source
                              id: TUTTA CASA
                              name: Casa
                            - icon: hue:downstairs
                              type: source
                              id: SOTTO
                              name: Sotto
                            - icon: hue:upstairs
                              type: source
                              id: SOPRA
                              name: Sopra
                        card_mod:
                          style:
                            mmp-shortcuts:
                              $: |
                                mmp-button {
                                  box-shadow: none;
                                  background: none;
                                  border: solid 1px grey;
                                  border-radius: 20px
                                }
                                mmp-button {
                                  height: 50px;
                                }
                            .: |
                              :host {
                                --mini-media-player-scale: 1 !important;
                              }
                              ha-card {
                              height: 60px;
                              }
                      - type: custom:mushroom-title-card
                        title: ''
                        subtitle: '----- Speakers Singoli -----'
                        alignment: center
                      - type: custom:mini-media-player
                        entity: media_player.spotify_francesco_raspa
                        group: true
                        hide:
                          name: true
                          power: true
                          source: true
                          mute: true
                          prev: true
                          next: true
                          play_pause: true
                          volume: true
                          runtime: true
                          info: true
                          icon: true
                          progress: true
                        info: short
                        replace_mute: play_pause
                        artwork: none
                        source: icon
                        sound_mode: full
                        shortcuts:
                          columns: 3
                          buttons:
                            - icon: hue:room-dining
                              type: source
                              id: Echo CUCINA
                              name: Sala
                            - icon: hue:room-bedroom
                              type: source
                              id: Echo CAMERA
                              name: Camera
                            - icon: hue:room-office
                              type: source
                              id: Echo UFFICIO
                              name: Ufficio
                        card_mod:
                          style:
                            mmp-shortcuts:
                              $: |
                                mmp-button {
                                  box-shadow: none;
                                  background: none;
                                  border: solid 1px grey;
                                  border-radius: 20px
                                }
                                mmp-button {
                                  height: 50px;
                                }
                            .: |
                              :host {
                                --mini-media-player-scale: 1 !important;
                              }
                              ha-card {
                              height: 60px;
                              }
            hold_action:
              action: none
            double_tap_action:
              action: none
            icon_color: >-
              {% if is_state('media_player.spotify_francesco_raspa', 'idle') %}

              grey

              {% elif is_state('media_player.spotify_francesco_raspa',
              'unavailable') %}

              black

              {% else %}

              green

              {% endif %}
            secondary: ''
            primary: Musica
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: mdi:television
            layout: vertical
            hold_action:
              action: none
            double_tap_action:
              action: none
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Telecomando TV
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        primary: ''
                        secondary: ''
                        icon: mdi:power
                        entity: media_player.lg_webos_smart_tv
                        layout: vertical
                        icon_color: >-
                          {% if is_state('media_player.lg_webos_smart_tv', 'on')
                          %}

                          green

                          {% elif is_state('media_player.lg_webos_smart_tv',
                          'off') %}

                          red

                          {% else %}

                          grey

                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: call-service
                          service: remote.send_command
                          service_data:
                            device: tvsalotto
                            command: toggle on off
                            entity_id: remote.broadlink_remote
                        card_mod:
                          style:
                            .: |
                              ha-card {
                              border-radius: 25px !important;
                              height: 75px !important;
                              }
                              :host {
                              --mush-icon-size: 55px;
                              margin-left: 70px !important;
                              margin-right: 70px !important;
                              }
                      - square: false
                        columns: 3
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:volume-plus
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              blue

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: volumeup
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:home
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: home
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 20px !important;
                                  margin-right: 20px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:plus
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              cyan

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: channelup
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                      - square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:volume-off
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              amber

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: mute
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                      - square: false
                        columns: 3
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:volume-minus
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              blue

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: volumedown
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:cog-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: settings
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 20px !important;
                                  margin-right: 20px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:minus
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              cyan

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: channeldown
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                      - type: grid
                        cards:
                          - type: picture
                            image: >-
                              https://assets.materialup.com/uploads/57194301-5bfe-4b2c-9f17-1c1de930c496/avatar.png
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: Plex
                              target:
                                entity_id:
                                  - media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                          - type: picture
                            image: >-
                              https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: Disney+
                              target:
                                entity_id:
                                  - media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                          - type: picture
                            image: >-
                              https://images.ctfassets.net/4cd45et68cgf/Rx83JoRDMkYNlMC9MKzcB/2b14d5a59fc3937afd3f03191e19502d/Netflix-Symbol.png?w=684&h=456
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: Netflix
                              target:
                                entity_id:
                                  - media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                          - type: picture
                            image: >-
                              https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Amazon_Prime_Logo.svg/320px-Amazon_Prime_Logo.svg.png
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: Amazon Prime Video
                              target:
                                entity_id:
                                  - media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                          - type: picture
                            image: >-
                              https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/YouTube_social_red_square_%282017%29.svg/2048px-YouTube_social_red_square_%282017%29.svg.png
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: YouTube
                              target:
                                entity_id:
                                  - media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                          - type: picture
                            image: >-
                              https://st2.depositphotos.com/8301258/11526/v/600/depositphotos_115268520-stock-illustration-tvmovie-logo-vector.jpg
                            tap_action:
                              action: call-service
                              service: media_player.select_source
                              service_data:
                                source: Live TV
                              target:
                                entity_id: media_player.lg_webos_smart_tv
                            hold_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  }
                        square: false
                        columns: 6
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:play
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              green

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: play
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 60px !important;
                                  margin-right: 0px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:pause
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              amber

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: pause
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 0px !important;
                                  margin-right: 60px !important;
                                  }
                      - square: false
                        columns: 3
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:check-bold
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              green

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: enter
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:arrow-up-bold-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: up
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 20px !important;
                                  margin-right: 20px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:backspace-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              red

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: exit
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:arrow-left-bold-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: left
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 60px !important;
                                  margin-right: -20px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:arrow-down-bold-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: down
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: 20px !important;
                                  margin-right: 20px !important;
                                  }
                          - type: custom:mushroom-template-card
                            primary: ''
                            secondary: ''
                            icon: mdi:arrow-right-bold-outline
                            entity: media_player.lg_webos_smart_tv
                            layout: vertical
                            icon_color: >-
                              {% if is_state('media_player.lg_webos_smart_tv',
                              'on') %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            tap_action:
                              action: call-service
                              service: remote.send_command
                              service_data:
                                device: tvsalotto
                                command: right
                                entity_id: remote.broadlink_remote
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 25px !important;
                                  height: 75px !important;
                                  }
                                  :host {
                                  --mush-icon-size: 55px;
                                  margin-left: -20px !important;
                                  margin-right: 60px !important;
                                  }
            icon_color: >-
              {% if is_state('media_player.lg_webos_smart_tv', 'on') %}

              purple

              {% elif is_state('media_player.lg_webos_smart_tv', 'unavailable')
              %}

              black

              {% else %}

              grey

              {% endif %}
            entity: media_player.lg_webos_smart_tv
            secondary: ''
            primary: TV
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: mdi:car
            layout: vertical
            hold_action:
              action: none
            double_tap_action:
              action: none
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Auto
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    type: grid
                    cards:
                      - type: grid
                        cards:
                          - type: grid
                            cards:
                              - type: picture-entity
                                entity: device_tracker.116d
                                image: https://i.imgur.com/bP4NZbl.png
                                aspect_ratio: '1'
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 170px !important;
                                      border-radius: 15px !important; 
                                      }
                              - type: map
                                entities:
                                  - entity: person.bmw
                                default_zoom: 12
                                dark_mode: false
                                hours_to_show: 0
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 170px !important;
                                      border-radius: 15px !important; 
                                      }
                            columns: 2
                            square: false
                          - type: custom:mushroom-template-card
                            primary: >-
                              {% if
                              is_state('binary_sensor.116d_door_lock_state',
                              'off') and is_state('device_tracker.116d',
                              'home')  %}

                              Auto Bloccata, in Casa

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'off') and is_state('device_tracker.116d',
                              'not_home')  %}

                              Auto Bloccata, fuori Casa

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'on') and is_state('device_tracker.116d', 'home') 
                              %}

                              Auto Sbloccata, in Casa

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'on') and is_state('device_tracker.116d',
                              'not_home')  %}

                              Auto Sbloccata, fuori Casa

                              {% else %}

                              NON RAGGIUNGIBILE

                              {% endif %}
                            secondary: ''
                            icon: mdi:car-key
                            entity: binary_sensor.116d_door_lock_state
                            icon_color: >-
                              {% if
                              is_state('binary_sensor.116d_door_lock_state',
                              'off') and is_state('device_tracker.116d',
                              'home')  %}

                              green

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'off') and is_state('device_tracker.116d',
                              'not_home')  %}

                              green

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'on') and is_state('device_tracker.116d', 'home') 
                              %}

                              red

                              {% elif
                              is_state('binary_sensor.116d_door_lock_state',
                              'on') and is_state('device_tracker.116d',
                              'not_home')  %}

                              red

                              {% else %}

                              black

                              {% endif %}
                            layout: horizontal
                            fill_container: true
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 60px !important;
                                  border-radius: 25px !important; 
                                  }
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:mushroom-template-card
                                primary: >-
                                  {% if is_state('binary_sensor.116d_windows',
                                  'off') %}

                                  Finestrini

                                  {% elif is_state('binary_sensor.116d_windows',
                                  'on') %}

                                  Finestrini

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                secondary: >-
                                  {% if is_state('binary_sensor.116d_windows',
                                  'off') %}

                                  Chiusi

                                  {% elif is_state('binary_sensor.116d_windows',
                                  'on') %}

                                  Aperti

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                icon: mdi:car-door
                                entity: binary_sensor.116d_windows
                                icon_color: >-
                                  {% if is_state('binary_sensor.116d_windows',
                                  'off') %}

                                  green

                                  {% elif is_state('binary_sensor.116d_windows',
                                  'on') %}

                                  red

                                  {% else %}

                                  black

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                              - type: custom:mushroom-template-card
                                primary: >-
                                  {% if is_state('binary_sensor.116d_lids',
                                  'off') %}

                                  Portiere

                                  {% elif is_state('binary_sensor.116d_lids',
                                  'on') %}

                                  Portiere

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                secondary: >-
                                  {% if is_state('binary_sensor.116d_lids',
                                  'off') %}

                                  Chiuse

                                  {% elif is_state('binary_sensor.116d_lids',
                                  'on') %}

                                  Aperte

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                icon: mdi:car-door-lock
                                entity: binary_sensor.116d_lids
                                icon_color: >-
                                  {% if is_state('binary_sensor.116d_lids',
                                  'off') %}

                                  green

                                  {% elif is_state('binary_sensor.116d_lids',
                                  'on') %}

                                  red

                                  {% else %}

                                  black

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                              - type: custom:mushroom-template-card
                                primary: >-
                                  {% if is_state('sensor.116d_mileage',
                                  'unavailable') %}

                                  Non raggiungibile

                                  {% else %}

                                  {{states('sensor.116d_mileage') }} Km

                                  {% endif %}
                                secondary: ''
                                icon: mdi:speedometer
                                entity: sensor.116d_mileage
                                icon_color: >-
                                  {% if is_state('sensor.116d_mileage',
                                  'unavailable') %}

                                  black

                                  {% else %}

                                  blue

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                              - type: custom:mushroom-template-card
                                primary: >
                                  {% if is_state('sensor.116d_mileage',
                                  'unavailable') %}

                                  Non raggiungibile

                                  {% else %}

                                  Olio tra:

                                  {% endif %}
                                secondary: >-
                                  {% if is_state('sensor.116d_mileage',
                                  'unavailable') %}

                                  Non raggiungibile

                                  {% else %}

                                  {{
                                  state_attr('binary_sensor.116d_condition_based_services',
                                  'oil distance') }}

                                  {% endif %}
                                icon: mdi:oil
                                entity: sensor.116d_oil_distance
                                icon_color: >-
                                  {% if is_state ('sensor.116d_oil_distance',
                                  '5000 km') %}

                                  yellow

                                  {% elif is_state ('sensor.116d_oil_distance',
                                  '4000 km') %}

                                  amber

                                  {% elif is_state ('sensor.116d_oil_distance',
                                  '3000 km') %}

                                  orange

                                  {% elif is_state ('sensor.116d_oil_distance',
                                  '2000 km') %}

                                  deep-orange

                                  {% elif is_state ('sensor.116d_oil_distance',
                                  '1000 km') %}

                                  red

                                  {% else %}

                                  blue

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                              - type: custom:mushroom-template-card
                                primary: >-
                                  {% if
                                  is_state('binary_sensor.116d_check_control_messages',
                                  'off') %}

                                  Check: OK

                                  {% elif
                                  is_state('binary_sensor.116d_check_control_messages',
                                  'on') %}

                                  Check: !!!

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                secondary: ''
                                icon: mdi:car-tire-alert
                                entity: binary_sensor.116d_check_control_messages
                                icon_color: >-
                                  {% if
                                  is_state('binary_sensor.116d_check_control_messages',
                                  'off') %}

                                  green

                                  {% elif
                                  is_state('binary_sensor.116d_check_control_messages',
                                  'on') %}

                                  red

                                  {% else %}

                                  black

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: horizontal
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                              - type: custom:mushroom-template-card
                                primary: >-
                                  {% if
                                  is_state('binary_sensor.116d_condition_based_services',
                                  'off') %}

                                  Service: OK

                                  {% elif
                                  is_state('binary_sensor.116d_condition_based_services',
                                  'on') %}

                                  Service: !!!

                                  {% else %}

                                  Non raggiungibile

                                  {% endif %}
                                secondary: ''
                                icon: mdi:wrench
                                entity: binary_sensor.116d_check_control_messages
                                icon_color: >-
                                  {% if
                                  is_state('binary_sensor.116d_condition_based_services',
                                  'off') %}

                                  green

                                  {% elif
                                  is_state('binary_sensor.116d_condition_based_services',
                                  'on') %}

                                  red

                                  {% else %}

                                  black

                                  {% endif %}
                                tap_action:
                                  action: more-info
                                hold_action:
                                  action: none
                                double_tap_action:
                                  action: none
                                layout: horizontal
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {
                                      height: 60px !important;
                                      border-radius: 25px !important; 
                                      }
                        square: false
                        columns: 1
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: gauge
                            entity: sensor.116d_remaining_fuel
                            min: 0
                            max: 50
                            needle: true
                            name: ' '
                            severity:
                              green: 25
                              yellow: 9
                              red: 0
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 110px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: gauge
                            entity: sensor.116d_remaining_range_total
                            min: 0
                            max: 850
                            name: ' '
                            needle: true
                            severity:
                              green: 425
                              yellow: 150
                              red: 0
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 110px !important;
                                  border-radius: 15px !important; 
                                  }
                      - type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Aria
                            secondary: ''
                            icon: mdi:fan
                            entity: button.116d_activate_air_conditioning
                            icon_color: purple
                            layout: vertical
                            fill_container: true
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 90px !important;
                                  border-radius: 25px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Luci
                            secondary: ''
                            icon: mdi:car-light-alert
                            entity: button.116d_flash_lights
                            icon_color: purple
                            layout: vertical
                            fill_container: true
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 90px !important;
                                  border-radius: 25px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Clacson
                            secondary: ''
                            icon: mdi:bullhorn
                            entity: button.116d_sound_horn
                            icon_color: purple
                            layout: vertical
                            fill_container: true
                            tap_action:
                              action: toggle
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 90px !important;
                                  border-radius: 25px !important; 
                                  }
                        square: false
                    columns: 1
                    square: false
            icon_color: >-
              {% if is_state('device_tracker.116d', 'away') and
              is_state('binary_sensor.116d_check_control_messages', 'off') and
              is_state('binary_sensor.116d_condition_based_services', 'off') %}

              blue

              {% elif is_state('device_tracker.116d', 'away') and
              is_state('binary_sensor.116d_check_control_messages', 'on') and
              is_state('binary_sensor.116d_condition_based_services', 'off') %}

              red

              {% elif is_state('device_tracker.116d', 'away') and
              is_state('binary_sensor.116d_check_control_messages', 'off') and
              is_state('binary_sensor.116d_condition_based_services', 'on') %}

              orange

              {% elif is_state('device_tracker.116d', 'home') and
              is_state('binary_sensor.116d_check_control_messages', 'off') and
              is_state('binary_sensor.116d_condition_based_services', 'on' ) %}

              orange

              {% elif is_state('device_tracker.116d', 'home') and
              is_state('binary_sensor.116d_check_control_messages', 'on') and
              is_state('binary_sensor.116d_condition_based_services', 'off') %}

              red

              {% elif is_state('device_tracker.116d', 'unavailable') %}

              black

              {% else %}

              grey

              {% endif %}
            entity: device_tracker.116d
            secondary: ''
            primary: Auto
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
      - square: false
        columns: 4
        type: grid
        cards:
          - type: custom:mushroom-template-card
            icon: mdi:flash
            entity: sensor.shellyem_98cdac1f3a41_channel_1_power
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Consumo
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: >-
                              {{states('sensor.shellyem_98cdac1f3a41_channel_1_power')
                              }} W
                            secondary: ''
                            icon: mdi:lightning-bolt
                            icon_color: >-
                              {% if ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 3000.0 %}

                              pink

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 2400.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 3000.0%}

                              red

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 2000.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 2400.0%}

                              orange

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 1600.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 2000.0%}

                              amber

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 1200.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 1600.0%}

                              yellow

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 800.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 1200.0%}

                              lime

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 400.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 800.0%}

                              light-green

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) > 200.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 400.0%}

                              green

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
                              float ) < 200.0 %}

                              teal

                              {% elif
                              is_state('sensor.shellyem_98cdac1f3a41_channel_1_power',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyem_98cdac1f3a41_channel_1_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            layout: horizontal
                            multiline_secondary: false
                            fill_container: true
                            card_mod:
                              style:
                                .: >
                                  ha-card {

                                  height: 65px !important;

                                  border-radius: 15px !important; 

                                  }

                                  :host {

                                  --mush-icon-size: 50px;

                                  --mush-card-primary-font-size: 18px
                                  !important;

                                  }
                          - type: custom:mini-graph-card
                            line_width: 2
                            align_header: center
                            height: 90
                            entities:
                              - sensor.shellyem_98cdac1f3a41_channel_1_power
                            align_icon: left
                            align_state: center
                            show:
                              name: false
                              state: false
                              icon: false
                              labels: false
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            name: Energia utilizzata
                            hours_to_show: 12
                            points_per_hour: 240
                            color_thresholds:
                              - value: 0
                                color: '#32b30e'
                              - value: 1500
                                color: '#d9b929'
                              - value: 3000
                                color: '#cf1117'
                            font_size: 1
                            font_size_header: 1
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  border-radius: 15px !important; 
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        alignment: center
                        subtitle: '------ Luci ------'
                      - type: custom:mushroom-template-card
                        primary: Luci in casa
                        secondary: '{{states(''sensor.luci_casa_power'') }} W'
                        icon: >-
                          {% if ( states( 'sensor.luci_casa_power' ) | float )
                          >= 10.0 %}

                          mdi:lightbulb-group-outline

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          < 10.0 %}

                          mdi:lightbulb-group-off

                          {% elif is_state('sensor.luci_casa_power',
                          'unavailable') %}

                          black

                          {% else %}

                          black

                          {% endif %}
                        icon_color: >-
                          {% if ( states( 'sensor.luci_casa_power' ) | float )
                          >= 300.0 %}

                          red

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          >= 200.0 and ( states( 'sensor.luci_casa_power' ) |
                          float ) < 300.0%}

                          orange

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          >= 150.0 and ( states( 'sensor.luci_casa_power' ) |
                          float ) < 200.0%}

                          amber

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          >= 50.0 and ( states( 'sensor.luci_casa_power' ) |
                          float ) < 150.0%}

                          light-green

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          >= 10.0 and ( states( 'sensor.luci_casa_power' ) |
                          float ) < 50.0%}

                          green

                          {% elif ( states( 'sensor.luci_casa_power' ) | float )
                          < 10.0 %}

                          grey

                          {% elif is_state('sensor.luci_casa_power',
                          'unavailable') %}

                          black

                          {% else %}

                          black

                          {% endif %}
                        entity: sensor.luci_casa_power
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        layout: horizontal
                        multiline_secondary: false
                        fill_container: true
                        card_mod:
                          style:
                            .: |
                              ha-card {
                              height: 50px !important;
                              border-radius: 15px !important; 
                              }
                      - type: custom:mushroom-title-card
                        title: ''
                        alignment: center
                        subtitle: '------ UPS // Server & Ufficio ------'
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Server & Ufficio
                            secondary: >-
                              {{states('sensor.server_ups_power') }} W
                              ({{states('sensor.myups_load') }}%)
                            icon: mdi:server
                            icon_color: >-
                              {% if ( states( 'sensor.myups_load' ) | float ) >=
                              95 %}

                              red

                              {% elif ( states( 'sensor.myups_load' ) | float )
                              >= 80 and ( states( 'sensor.myups_load' ) | float
                              ) < 95 %}

                              orange

                              {% elif ( states( 'sensor.myups_load' ) | float )
                              >= 50.0 and ( states( 'sensor.myups_load' ) |
                              float ) < 80 %}

                              amber

                              {% elif ( states( 'sensor.myups_load' ) | float )
                              >= 30 and ( states( 'sensor.myups_load' ) | float
                              ) < 50 %}

                              light-green

                              {% elif ( states( 'sensor.myups_load' ) | float )
                              < 30 %}

                              green

                              {% elif is_state('sensor.myups_load',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.server_ups_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: >-
                              Batteria: {{states('sensor.myups_battery_charge')
                              }}%
                            secondary: '{{states(''sensor.myups_status'') }}'
                            icon: >-
                              {% if ( states( 'sensor.myups_battery_charge' ) |
                              float ) > 95 %}

                              mdi:battery-charging

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 80 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 95 %}

                              mdi:battery-80

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 50.0 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 80 %}

                              mdi:battery-60

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 30 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 50 %}

                              mdi:battery-30

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) < 30 %}

                              mdi:battery-alert

                              {% elif is_state('sensor.myups_battery_charge',
                              'unavailable') %}

                              mdi:battery-alert

                              {% else %}

                              mdi:battery-alert

                              {% endif %}
                            icon_color: >-
                              {% if ( states( 'sensor.myups_battery_charge' ) |
                              float ) > 95 %}

                              green

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 80 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 95 %}

                              light-green

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 50.0 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 80 %}

                              amber

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) > 30 and ( states(
                              'sensor.myups_battery_charge' ) | float ) < 50 %}

                              orange

                              {% elif ( states( 'sensor.myups_battery_charge' )
                              | float ) < 30 %}

                              red

                              {% elif is_state('sensor.myups_battery_charge',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.myups_battery_charge
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        alignment: center
                        subtitle: '------ Clima------'
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Climatizzatore
                            secondary: >-
                              {{states('sensor.shellyem_98cdac1f3a41_channel_2_power')
                              }} W
                            icon: mdi:air-conditioner
                            icon_color: >-
                              {% if ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) >= 1500.0 %}

                              red

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) >= 1000.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) < 1500.0%}

                              orange

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) >= 500.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) < 1000.0%}

                              amber

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) >= 100.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) < 500.0%}

                              light-green

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) >= 6.0 and ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) < 100.0%}

                              green

                              {% elif ( states(
                              'sensor.shellyem_98cdac1f3a41_channel_2_power' ) |
                              float ) < 6.0 %}

                              grey

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyem_98cdac1f3a41_channel_2_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Ventola camera
                            secondary: '{{states(''sensor.ventilatore_camera_power'') }} W'
                            icon: >-
                              {% if ( states( 'sensor.ventilatore_camera_power'
                              ) | float ) >= 10.0 %}

                              mdi:ceiling-fan

                              {% elif ( states(
                              'sensor.ventilatore_camera_power' ) | float ) <
                              10.0 %}

                              mdi:ceiling-fan

                              {% else %}

                              black

                              {% endif %}
                            icon_color: >-
                              {% if ( states( 'sensor.ventilatore_camera_power'
                              ) | float ) >= 1.0 %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            entity: sensor.ventilatore_camera_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Purificatore sala
                            secondary: '{{states(''sensor.mi_air_purifier_3_3h_power'') }} W'
                            icon: mdi:air-purifier
                            icon_color: >-
                              {% if ( states(
                              'sensor.mi_air_purifier_3_3h_power' ) | float ) >=
                              1.0 %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            entity: sensor.mi_air_purifier_3_3h_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Levoit camera
                            secondary: '{{states(''sensor.purificatore_aria_power'') }} W'
                            icon: mdi:air-purifier
                            icon_color: >-
                              {% if ( states( 'sensor.purificatore_aria_power' )
                              | float ) >= 1.0 %}

                              purple

                              {% else %}

                              grey

                              {% endif %}
                            entity: sensor.purificatore_aria_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                      - type: custom:mushroom-title-card
                        title: ''
                        alignment: center
                        subtitle: '------ Elettrodomestici ------'
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Lavatrice
                            secondary: '{{states(''sensor.shellyplug_lavatrice_power'') }} W'
                            icon: >-
                              {% if ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              10.0 %}

                              mdi:washing-machine

                              {% else %}

                              mdi:washing-machine-off

                              {% endif %}
                            icon_color: >-
                              {% if ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              2000.0 %}

                              red

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              1250.0 and ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              2000.0%}

                              orange

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              500.0 and ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              1250.0%}

                              amber

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              250.0 and ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              500.0%}

                              light-green

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              10.0 and ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              250.0%}

                              green

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) >=
                              1.0 and ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              10.0%}

                              blue

                              {% elif ( states(
                              'sensor.shellyplug_lavatrice_power' ) | float ) <
                              1.0 %}

                              grey

                              {% elif
                              is_state('sensor.shellyplug_lavatrice_power',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_lavatrice_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Asciugatrice
                            secondary: >-
                              {{states('sensor.shellyplug_asciugatrice_power')
                              }} W
                            icon: >-
                              {% if ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 10.0 %}

                              mdi:tumble-dryer

                              {% else %}

                              mdi:tumble-dryer-off

                              {% endif %}
                            icon_color: >-
                              {% if ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 2000.0 %}

                              red

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 1250.0 and ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 2000.0%}

                              orange

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 500.0 and ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 1250.0%}

                              amber

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 250.0 and ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 500.0%}

                              light-green

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 10.0 and ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 250.0%}

                              green

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              >= 1.0 and ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 10.0%}

                              blue

                              {% elif ( states(
                              'sensor.shellyplug_asciugatrice_power' ) | float )
                              < 1.0 %}

                              grey

                              {% elif
                              is_state('sensor.shellyplug_asciugatrice_power',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_asciugatrice_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Lavastoviglie
                            secondary: >-
                              {{states('sensor.shellyplug_lavastoviglie_power')
                              }} W
                            icon: >-
                              {% if ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 10.0 %}

                              mdi:dishwasher

                              {% else %}

                              mdi:dishwasher-off

                              {% endif %}
                            icon_color: >-
                              {% if ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 2000.0 %}

                              red

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 1250.0 and ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 2000.0%}

                              orange

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 500.0 and ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 1250.0%}

                              amber

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 250.0 and ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 500.0%}

                              light-green

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 10.0 and ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 250.0%}

                              green

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) >= 1.0 and ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 10.0%}

                              blue

                              {% elif ( states(
                              'sensor.shellyplug_lavastoviglie_power' ) | float
                              ) < 1.0 %}

                              grey

                              {% elif
                              is_state('sensor.shellyplug_lavastoviglie_power',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_lavastoviglie_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Forno
                            secondary: '{{states(''sensor.shellyplug_forno_power'') }} W'
                            icon: mdi:toaster-oven
                            icon_color: >-
                              {% if ( states( 'sensor.shellyplug_forno_power' )
                              | float ) >= 2000.0 %}

                              red

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) >= 1250.0 and ( states(
                              'sensor.shellyplug_forno_power' ) | float ) <
                              2000.0%}

                              orange

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) >= 500.0 and ( states(
                              'sensor.shellyplug_forno_power' ) | float ) <
                              1250.0%}

                              amber

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) >= 250.0 and ( states(
                              'sensor.shellyplug_forno_power' ) | float ) <
                              500.0%}

                              light-green

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) >= 10.0 and ( states(
                              'sensor.shellyplug_forno_power' ) | float ) <
                              250.0%}

                              green

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) >= 1.0 and ( states(
                              'sensor.shellyplug_forno_power' ) | float ) <
                              10.0%}

                              blue

                              {% elif ( states( 'sensor.shellyplug_forno_power'
                              ) | float ) < 1.0 %}

                              grey

                              {% elif is_state('sensor.shellyplug_forno_power',
                              'unavailable') %}

                              black

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_forno_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Frigo
                            secondary: '{{states(''sensor.shellyplug_frigo_power'') }} W'
                            icon: >-
                              {% if ( states( 'sensor.shellyplug_frigo_power' )
                              | float ) >= 10.0 %}

                              mdi:fridge-outline

                              {% else %}

                              mdi:fridge-off-outline

                              {% endif %}
                            icon_color: >-
                              {% if ( states( 'sensor.shellyplug_frigo_power' )
                              | float ) >= 10.0 %}

                              blue

                              {% elif ( states( 'sensor.shellyplug_frigo_power'
                              ) | float ) < 10.0 %}

                              grey

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_frigo_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                          - type: custom:mushroom-template-card
                            primary: Freezer
                            secondary: '{{states(''sensor.shellyplug_freezer_power'') }} W'
                            icon: >-
                              {% if ( states( 'sensor.shellyplug_freezer_power'
                              ) | float ) >= 10.0 %}

                              mdi:fridge-industrial-outline

                              {% else %}

                              mdi:fridge-industrial-off-outline

                              {% endif %}
                            icon_color: >-
                              {% if ( states( 'sensor.shellyplug_freezer_power'
                              ) | float ) >= 10.0 %}

                              blue

                              {% elif ( states(
                              'sensor.shellyplug_freezer_power' ) | float ) <
                              10.0 %}

                              grey

                              {% else %}

                              black

                              {% endif %}
                            entity: sensor.shellyplug_freezer_power
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                            card_mod:
                              style:
                                .: |
                                  ha-card {
                                  height: 50px !important;
                                  border-radius: 15px !important; 
                                  }
                      - type: custom:mushroom-template-card
                        primary: Cantinetta
                        secondary: '{{states(''sensor.shellyplug_cantinetta_power'') }} W'
                        icon: mdi:bottle-wine-outline
                        icon_color: >-
                          {% if ( states( 'sensor.shellyplug_cantinetta_power' )
                          | float ) >= 5.0 %}

                          blue

                          {% elif ( states( 'sensor.shellyplug_cantinetta_power'
                          ) | float ) < 5.0 %}

                          grey

                          {% else %}

                          black

                          {% endif %}
                        entity: sensor.shellyplug_cantinetta_power
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        card_mod:
                          style:
                            .: |
                              ha-card {
                              height: 50px !important;
                              border-radius: 15px !important; 
                              }
                              :host {
                              margin-left: 100px !important;
                              margin-right: 100px !important;
                              }
            double_tap_action:
              action: none
            hold_action:
              action: none
            icon_color: >-
              {% if ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' ) |
              float ) > 3000.0 %}

              pink

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 2400.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              3000.0%}

              red

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 2000.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              2400.0%}

              orange

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 1600.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              2000.0%}

              amber

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 1200.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              1600.0%}

              yellow

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 800.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              1200.0%}

              lime

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 400.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              800.0%}

              light-green

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) > 200.0 and ( states(
              'sensor.shellyem_98cdac1f3a41_channel_1_power' ) | float ) <
              400.0%}

              green

              {% elif ( states( 'sensor.shellyem_98cdac1f3a41_channel_1_power' )
              | float ) < 200.0 %}

              teal

              {% elif is_state('sensor.shellyem_98cdac1f3a41_channel_1_power',
              'unavailable') %}

              black

              {% else %}

              black

              {% endif %}
            secondary: ''
            primary: '{{states(''sensor.shellyem_98cdac1f3a41_channel_1_power'') }} W'
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: mdi:wifi
            entity: binary_sensor.archer_mr600_wan_status_2
            layout: vertical
            icon_color: >-
              {% if ( states( 'sensor.speedtest_download' ) | float ) > 100.00
              %}

              green

              {% elif ( states( 'sensor.speedtest_download' ) | float ) > 75.00
              and ( states( 'sensor.speedtest_download' ) | float ) < 100.00 %}

              light-green

              {% elif ( states( 'sensor.speedtest_download' ) | float ) > 45.00
              and ( states( 'sensor.speedtest_download' ) | float ) < 75.00 %}

              amber

              {% elif ( states( 'sensor.speedtest_download' ) | float ) > 25.00
              and ( states( 'sensor.speedtest_download' ) | float ) < 45.00 %}

              orange

              {% else %}

              pink

              {% endif %}
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Connessione
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px;  
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Pi-hole
                            secondary: AdBlocker no.1
                            icon: mdi:pi-hole
                            layout: vertical
                            tap_action:
                              action: toggle
                            entity: switch.pi_hole
                            icon_color: |-
                              {% if is_state('switch.pi_hole', 'on') %}
                              blue
                              {% else %}
                              grey
                              {% endif %}
                          - type: custom:mushroom-template-card
                            primary: AdGuard
                            secondary: AdBlocker no.2
                            icon: mdi:shield-check-outline
                            layout: vertical
                            tap_action:
                              action: toggle
                            entity: switch.adguard_home_protection
                            icon_color: >-
                              {% if is_state('switch.adguard_home_protection',
                              'on') %}

                              blue

                              {% else %}

                              grey

                              {% endif %}
                      - type: entity
                        entity: binary_sensor.archer_mr600_wan_status_2
                        name: Internet
                      - type: custom:mini-graph-card
                        line_width: 3
                        align_header: default
                        align_icon: left
                        entities:
                          - entity: sensor.speedtest_download
                            name: Test Download
                            state_adaptive_color: true
                            show_fill: false
                          - entity: sensor.speedtest_ping
                            color: darkcyan
                            name: Test Ping
                            show_fill: true
                            show_line: false
                            show_points: false
                            show_legend: false
                            show_state: true
                            state_adaptive_color: true
                            y_axis: secondary
                        show:
                          name: true
                          legend: false
                          icon: true
                          labels: true
                          labels_secondary: true
                          icon_adaptive_color: true
                        hours_to_show: 12
                        points_per_hour: 30
                        color_thresholds:
                          - value: 30
                            color: '#cc4c0c'
                          - value: 45
                            color: '#ccac0c'
                          - value: 65
                            color: '#26cc0c'
                        height: 50
                        font_size: 60
                        font_size_header: 14
                      - type: custom:mini-graph-card
                        entities:
                          - sensor.archer_mr600_kib_s_received
                        line_width: 3
                        align_header: default
                        align_icon: left
                        align_state: center
                        height: 50
                        font_size: 60
                        font_size_header: 14
                        show:
                          state: true
                          fill: true
                          graph: line
                          icon_adaptive_color: true
                        icon: mdi:download
                        name: Downlink
                        hours_to_show: 12
                        points_per_hour: 30
                      - type: custom:mini-graph-card
                        entities:
                          - sensor.archer_mr600_kib_s_sent
                        line_width: 3
                        align_header: default
                        align_icon: left
                        align_state: center
                        height: 50
                        font_size: 60
                        font_size_header: 14
                        show:
                          state: true
                          fill: true
                          graph: line
                          icon_adaptive_color: true
                        icon: mdi:upload
                        name: Uplink
                        hours_to_show: 12
                        points_per_hour: 30
            secondary: ''
            primary: Internet
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            secondary: ''
            icon: mdi:server
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Server
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 1
                    type: grid
                    cards:
                      - square: false
                        columns: 3
                        type: grid
                        cards:
                          - type: custom:mushroom-entity-card
                            entity: binary_sensor.pve_haos8_2
                            name: HASSOS
                            layout: vertical
                            icon_color: green
                            icon: mdi:home-assistant
                            primary_info: none
                            secondary_info: state
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                          - type: custom:mushroom-entity-card
                            entity: binary_sensor.pve_media_running
                            name: HASSOS
                            layout: vertical
                            icon_color: green
                            icon: mdi:plex
                            primary_info: none
                            secondary_info: state
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                          - type: custom:mushroom-entity-card
                            entity: binary_sensor.pve_printserver_running
                            name: HASSOS
                            layout: vertical
                            icon_color: green
                            icon: mdi:printer
                            primary_info: none
                            secondary_info: state
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            double_tap_action:
                              action: none
                      - type: custom:mushroom-entity-card
                        entity: binary_sensor.pve_haos8_2
                        name: Eseguire restart di Home Assistant
                        icon_color: red
                        icon: mdi:restart
                        primary_info: name
                        secondary_info: none
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        double_tap_action:
                          action: call-service
                          service: homeassistant.restart
                          service_data: {}
                          target: {}
                      - square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mini-graph-card
                            entities:
                              - sensor.glances_package_id_0_temperature
                            line_width: 3
                            align_header: default
                            align_icon: left
                            align_state: center
                            height: 35
                            font_size: 60
                            font_size_header: 14
                            show:
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            icon: mdi:thermometer
                            name: CPU temp
                            hours_to_show: 12
                            points_per_hour: 30
                            color_thresholds:
                              - value: 45
                                color: '#26cc0c'
                              - value: 50
                                color: '#ccac0c'
                              - value: 65
                                color: '#cc4c0c'
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mini-graph-card
                            entities:
                              - sensor.processor_use_percent
                            line_width: 3
                            align_header: default
                            align_icon: left
                            align_state: center
                            height: 35
                            font_size: 60
                            font_size_header: 14
                            show:
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            icon: mdi:cpu-64-bit
                            name: CPU usage
                            hours_to_show: 12
                            points_per_hour: 30
                            color_thresholds:
                              - value: 0
                                color: '#26cc0c'
                              - value: 40
                                color: '#ccac0c'
                              - value: 75
                                color: '#cc4c0c'
                          - type: custom:mini-graph-card
                            entities:
                              - sensor.memory_use_percent
                            line_width: 3
                            align_header: default
                            align_icon: left
                            align_state: center
                            height: 35
                            font_size: 60
                            font_size_header: 14
                            show:
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            icon: mdi:chip
                            name: Memory use
                            hours_to_show: 12
                            points_per_hour: 30
                            color_thresholds:
                              - value: 30
                                color: '#26cc0c'
                              - value: 50
                                color: '#ccac0c'
                              - value: 70
                                color: '#cc4c0c'
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:mini-graph-card
                            entities:
                              - sensor.disk_use_percent_config
                            line_width: 3
                            align_header: default
                            align_icon: left
                            align_state: center
                            height: 35
                            font_size: 60
                            font_size_header: 14
                            show:
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            icon: mdi:memory
                            name: Disk use
                            hours_to_show: 12
                            points_per_hour: 30
                            color_thresholds:
                              - value: 10
                                color: '#26cc0c'
                              - value: 65
                                color: '#ccac0c'
                              - value: 90
                                color: '#cc4c0c'
                          - type: custom:mini-graph-card
                            entities:
                              - sensor.mariadb
                            line_width: 3
                            align_header: default
                            align_icon: left
                            align_state: center
                            height: 35
                            font_size: 60
                            font_size_header: 14
                            show:
                              fill: true
                              graph: line
                              icon_adaptive_color: true
                            icon: mdi:database-outline
                            name: Database size
                            hours_to_show: 12
                            points_per_hour: 30
                            color_thresholds:
                              - value: 0
                                color: '#26cc0c'
                              - value: 1000
                                color: '#ccac0c'
                              - value: 2000
                                color: '#cc4c0c'
            layout: vertical
            hold_action:
              action: none
            double_tap_action:
              action: none
            icon_color: >-
              {% if is_state('binary_sensor.pve_haos8_2', 'on') and
              is_state('binary_sensor.pve_media_running', 'on') and
              is_state('binary_sensor.pve_printserver_running', 'on') %}

              green

              {% elif ( states( 'sensor.glances_package_id_0_temperature' ) |
              float ) > 50.00 %}

              pink

              {% elif ( states( 'sensor.processor_use_percent' ) | float ) >
              50.00 %}

              pink

              {% elif ( states( 'sensor.memory_use_percent' ) | float ) > 50.00
              %}

              pink

              {% elif ( states( 'sensor.disk_use_percent_config' ) | float ) >
              85.00 %}

              pink

              {% else %}

              orange

              {% endif %}
            entity: binary_sensor.pve_haosova_6_2_running
            primary: Server
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
          - type: custom:mushroom-template-card
            icon: mdi:battery-charging-100
            icon_color: |-
              {% if is_state('input_boolean.battery_allarme', 'on') %}
              red
              {% else %}
              green
              {% endif %}
            entity: input_boolean.battery_allarme
            layout: vertical
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Dettagli Server
                card:
                  type: custom:mod-card
                  style: |
                    ha-card {
                       padding-top: 10px;
                       padding-right: 10px;
                       padding-left: 10px;
                       padding-bottom: 10px; 
                       heigh: 500px;
                    }
                  card:
                    square: false
                    columns: 5
                    type: grid
                    cards:
                      - type: custom:button-card
                        name: Campanello
                        entity: sensor.ingresso_principale_battery
                        size: 30px
                        color_type: card
                        icon: mdi:doorbell-video
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Switchbot
                        entity: sensor.fraraspa_gmail_com_battery
                        size: 30px
                        color_type: card
                        icon: mdi:door-closed-lock
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Porta Ingresso
                        entity: sensor.0x00158d0007bf130c_battery
                        size: 30px
                        color_type: card
                        icon: hue:room-other
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: (Entrata)
                        entity: sensor.interruttore_sala_porta_battery_level
                        size: 25px
                        color_type: card
                        icon: hue:room-front-door
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Sala)
                        entity: sensor.interruttore_sala_battery_level
                        size: 25px
                        color_type: card
                        icon: hue:room-dining
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: Tablet Sala
                        entity: sensor.galaxy_tab_a7_battery_level
                        size: 30px
                        color_type: card
                        icon: mdi:tablet-dashboard
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Frigo
                        entity: sensor.0x00158d00075a7f41_battery
                        size: 30px
                        color_type: card
                        icon: mdi:snowflake
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: (Cucina)
                        entity: sensor.hue_motion_sensor_cucina_battery
                        size: 25px
                        color_type: card
                        icon: hue:motion-sensor
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007d12925_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-kitchen
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Luci)
                        entity: sensor.interruttore_bagno_battery_level
                        size: 25px
                        color_type: card
                        icon: hue:room-bathroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007b7daef_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bathroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Luci)
                        entity: sensor.0x00158d0007c58946_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bedroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Letto)
                        entity: sensor.0x84fd27fffe16a5e4_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bedroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Temp)
                        entity: sensor.0x00124b0022eb6c1c_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bedroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Temp2)
                        entity: sensor.0x00158d000755c8d9_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bedroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007ef5a4e_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bedroom
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Scale)
                        entity: sensor.hue_motion_sensor_scale_battery
                        size: 25px
                        color_type: card
                        icon: hue:motion-sensor
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Luci)
                        entity: sensor.interruttore_salotto_battery_level
                        size: 25px
                        color_type: card
                        icon: hue:room-living
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007ecdbf6_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-living
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Temp)
                        entity: sensor.temperatura_salotto_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-living
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (PC)
                        entity: sensor.0x00124b0022665ccc_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-computer
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (PC)
                        entity: sensor.device_power
                        size: 25px
                        color_type: card
                        icon: hue:motion-sensor
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: Sottotetto
                        entity: sensor.0x00124b00234468de_battery
                        size: 30px
                        color_type: card
                        icon: hue:room-attic
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Finestra server
                        entity: sensor.0x00124b002247a7a3_battery
                        size: 30px
                        color_type: card
                        icon: hue:ceiling-aurelle
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Svapo
                        entity: sensor.0x00124b0023ebc150_battery
                        size: 30px
                        color_type: card
                        icon: hue:room-garage
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Freezer
                        entity: sensor.0x00158d0007df5ba4_battery
                        size: 30px
                        color_type: card
                        icon: mdi:snowflake-variant
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: (Gate)
                        entity: sensor.0x00158d0007d207df_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bbq
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007e63a54_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-bbq
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Gate)
                        entity: sensor.0x00158d0007d12896_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-terrace
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (F)
                        entity: sensor.0x00158d0007ecdb4c_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-terrace
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: Porta Garage
                        entity: sensor.0x00124b002344b292_battery
                        size: 30px
                        color_type: card
                        icon: hue:room-carport
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: Basculante Garage
                        entity: sensor.0x00124b0023ebb4c2_battery
                        size: 30px
                        color_type: card
                        icon: mdi:garage-lock
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: false
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                      - type: custom:button-card
                        name: (Temp)
                        entity: sensor.sonoff_a48001620f_battery
                        size: 25px
                        color_type: card
                        icon: hue:room-driveway
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Sotto)
                        entity: sensor.0x0015bc003100c2bf_battery
                        size: 25px
                        color_type: card
                        icon: mdi:smoke-detector-variant
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
                      - type: custom:button-card
                        name: (Sopra)
                        entity: sensor.0x0015bc003100c3e1_battery
                        size: 25px
                        color_type: card
                        icon: mdi:smoke-detector-variant
                        state:
                          - color: rgb(153,255,153)
                            operator: '>'
                            value: 70
                          - color: rgb(204,255,204)
                            operator: '>'
                            value: 50
                          - color: rgb(255,255,204)
                            operator: '>'
                            value: 35
                          - color: rgb(255,204,204)
                            operator: '>'
                            value: 20
                          - color: rgb(255,153,153)
                            operator: <
                            value: 20
                        show_state: false
                        show_name: true
                        layout: vertical
                        styles:
                          card:
                            - height: 60px
                            - font-size: 12px
            secondary: ''
            primary: Batterie
            card_mod:
              style:
                .: |
                  ha-card {
                    height: 70px !important;
                  }
                  :host {
                        --mush-card-primary-font-size: 12px;
                        --mush-card-secondary-font-size: 10px;
                        --mush-spacing: 6px;
                        }
